"use strict";(globalThis.webpackChunkstec=globalThis.webpackChunkstec||[]).push([[3824],{85873:(e,t,a)=>{a.r(t),a.d(t,{DatePicker:()=>o,UncontrolledDatePicker:()=>i,default:()=>m});var n=a(8403),c=a(26878),r=a(75761),l=a(78565),s=a(10382);const i=React.forwardRef(((e,t)=>{const[a,i]=(0,c.useState)(e.defaultValue),[o,m]=(0,c.useState)(!1),[d,u]=(0,c.useState)(!1),h=a.split("T"),_=h[0],p=h[1]||"00:00";(0,c.useEffect)((()=>{if((o||e.wasSubmitted)&&e.required){const t=new RegExp(/[0-9]{4}-[0-9]{2}-[0-9]{2}(T[0-9]{2}:[0-9]{2})?/).test(a);if(u(!1===t),t){const t=moment(a),n=!!e.min&&moment(e.min),c=!!e.max&&moment(e.max);n&&t.isBefore(n)&&u(!0),c&&t.isAfter(c)&&u(!0)}}}),[e.required,a,e.wasSubmitted,o,e.min,e.max]);const v=t=>{if(!1===moment(t).isValid()){let a=e.min?moment(e.min):moment();const n=e.includeTime?"YYYY-MM-DDTHH:mm":"YYYY-MM-DD";t=a.format(n)}i(t),e.onChange(t)};return React.createElement(n.StecDiv,{className:"stec-datepicker"},React.createElement(l.default,{text:e.title}),React.createElement(n.StecDiv,{className:e.includeTime?"stec-datepicker-inputs":""},React.createElement("input",{className:"stec-datepicker-inputs-date",ref:t,type:"date",value:_,onChange:e=>{const t=e.target.value+"T"+p;v(t)},min:e.min,max:e.max,onBlur:()=>{m(!0)}}),e.includeTime&&React.createElement("input",{type:"time",className:"stec-datepicker-inputs-time",value:p,onBlur:()=>{m(!0)},onChange:e=>{const t=_+"T"+e.target.value;v(t)}})),React.createElement(s.default,{floating:!0,text:e.errorMessage,display:d}),React.createElement(r.default,{text:e.description}))}));i.displayName="UncontrolledDatePicker";const o=React.forwardRef(((e,t)=>{const[a,i]=(0,c.useState)(!1),[o,m]=(0,c.useState)(!1);(0,c.useEffect)((()=>{if((a||e.wasSubmitted)&&e.required){const t=new RegExp(/[0-9]{4}-[0-9]{2}-[0-9]{2}(T[0-9]{2}:[0-9]{2})?/).test(e.value);if(m(!1===t),t){const t=moment(e.value),a=!!e.min&&moment(e.min),n=!!e.max&&moment(e.max);a&&t.isBefore(a)&&m(!0),n&&t.isAfter(n)&&m(!0)}}}),[e.max,e.min,e.required,e.value,e.wasSubmitted,a]);const d=t=>{if(!1===moment(t).isValid()){let a=e.min?moment(e.min):moment();const n=e.includeTime?"YYYY-MM-DD\\THH:mm":"YYYY-MM-DD";t=a.format(n)}e.onChange(t)},u=e.value.split("T"),h=u[0],_=u[1]||"00:00";return React.createElement(n.StecDiv,{className:"stec-datepicker"},React.createElement(l.default,{text:e.title}),React.createElement(n.StecDiv,{className:e.includeTime?"stec-datepicker-inputs":""},React.createElement("input",{ref:t,className:"stec-datepicker-inputs-date",type:"date",value:h,onChange:e=>{const t=e.target.value+"T"+_;d(t)},min:e.min,max:e.max,onBlur:()=>{i(!0)}}),e.includeTime&&React.createElement("input",{type:"time",className:"stec-datepicker-inputs-time",value:_,onBlur:()=>{i(!0)},onChange:e=>{const t=h+"T"+e.target.value;d(t)}})),React.createElement(s.default,{floating:!0,text:e.errorMessage,display:o}),React.createElement(r.default,{text:e.description}))}));o.displayName="DatePicker";const m=o},85262:(e,t,a)=>{a.r(t),a.d(t,{InputCheckbox:()=>o,UncontrolledInputCheckbox:()=>i,default:()=>m});var n=a(8403),c=a(26878),r=a(75761),l=a(78565),s=a(10382);const i=e=>{const[t,a]=(0,c.useState)(void 0!==e.defaultValue&&e.defaultValue),[i,o]=(0,c.useState)(!1),[m,d]=(0,c.useState)(!1);return(0,c.useEffect)((()=>{(i||e.wasSubmitted)&&d(!0===e.required&&!1===t)}),[t,e.required,e.wasSubmitted,i]),React.createElement(n.StecDiv,{className:"stec-checkbox-wrapper",title:e.hint},React.createElement("label",null,React.createElement(n.StecInputCheckBox,{checked:t,onChange:t=>{o(!0),a(t.target.checked),e.onChange&&e.onChange(t.target.checked)}}),React.createElement(l.default,{text:e.title})),React.createElement(s.default,{floating:!0,text:e.errorMessage,display:m}),React.createElement(r.default,{text:e.description}),e.name&&React.createElement("input",{type:"hidden",required:e.required,name:e.name,value:t}))},o=e=>{const[t,a]=(0,c.useState)(!1),[i,o]=(0,c.useState)(!1);return(0,c.useEffect)((()=>{(t||e.wasSubmitted)&&o(!0===e.required&&!1===e.value)}),[e.value,e.required,t,e.wasSubmitted]),React.createElement(n.StecDiv,{className:"stec-checkbox-wrapper",title:e.hint},React.createElement("label",null,React.createElement(n.StecInputCheckBox,{checked:e.value,onChange:t=>{a(!0),e.onChange&&e.onChange(t.target.checked)}}),React.createElement(l.default,{text:e.title})),React.createElement(s.default,{floating:!0,text:e.errorMessage,display:i}),React.createElement(r.default,{text:e.description}),e.name&&React.createElement("input",{type:"hidden",required:e.required,name:e.name,value:e.value}))},m=o},199:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var n=a(85873),c=a(32488),r=a(22008),l=a(13328),s=a(8403),i=a(73772),o=a(26960),m=a(26878);const __=i.__,d=({selectedItems:e,activeItems:t,taxonomyItems:a,onChange:n})=>{let c=[],r=[];t&&(r=t.split(",").map((e=>parseInt(e,10)||""))),e&&(c=e.split(",").map((e=>parseInt(e,10)||"")));const l=a.map((e=>((r.includes(e.value)||c.includes(e.value))&&(e.active=!0),e))),[i,d]=(0,m.useState)(l);return React.createElement(s.StecDiv,{className:"stec-manage-list-filters-dropdown-wrap"},i.map((e=>{let t=[];const a=r.includes(e.value);return e.active?t.push("fa-solid fa-square-check"):t.push("fa-regular fa-square"),a&&t.push("is-active-filter"),React.createElement(s.StecDiv,{key:e.value,className:"stec-manage-list-filters-dropdown-item",onClick:()=>{(e=>{const t=(0,o.cloneDeep)(i);t.forEach((t=>(t.value===e.value&&(t.active=!e.active),t))),d(t),n(t)})(e)}},React.createElement("i",{className:t.join(" ")}),React.createElement(s.StecSpan,null,e.label))})))},u=({activeItems:e,selectedItems:t,taxonomy:a,onChange:n})=>{const{items:c,ready:s,error:i}=(0,l.useTaxonomyItemsAll)({perPage:100,permissionType:"read_permission",taxonomy:a});if(!1===s)return React.createElement(r.default,{type:"small-wide",title:__("Refreshing list","stachethemes_event_calendar_lite"),style:{padding:10}});if(i)return null;const o=c.map((e=>({label:e.name,value:e.id,active:!1}))),m=[{label:__("Unassigned","stachethemes_event_calendar_lite"),value:-1,active:!1},...o];return React.createElement(d,{selectedItems:t,activeItems:e,taxonomyItems:m,onChange:n})},h=({label:e,icon:t,taxonomy:a,selectedItems:n,activeItems:c,onChange:r})=>{const o=(0,m.useRef)(!1),[d,h]=(0,m.useState)(!1);(0,l.useOutsideHandler)(o,(()=>{h(!1)}));const _=!!c;return React.createElement(s.StecDiv,{className:`stec-manage-list-filters ${d?"active":""} ${_?"has-active-items":""}`,ref:o,title:(0,i.sprintf)(__("Filter by %s","stachethemes_event_calendar_lite"),e),onClick:()=>{h(!d)}},React.createElement("i",{className:t}),d&&React.createElement(s.StecDiv,{className:"stec-manage-list-filters-dropdown",onClick:e=>{e.stopPropagation()}},React.createElement(s.StecDiv,{className:"stec-manage-list-filters-dropdown-label"},(0,i.sprintf)(__("Filter by %s","stachethemes_event_calendar_lite"),e)),React.createElement(u,{selectedItems:n,activeItems:c,taxonomy:a,onChange:r})))},_=({label:e,icon:t,values:a,activeValues:c,onChange:r})=>{const o=(0,m.useRef)(!1),[d,u]=(0,m.useState)(!1);(0,l.useOutsideHandler)(o,(()=>{u(!1)}));const h=c?.maxDate||c?.minDate;return React.createElement(s.StecDiv,{className:`stec-manage-list-filters ${d?"active":""} ${h?"has-active-items":""}`,ref:o,title:(0,i.sprintf)(__("Filter by %s","stachethemes_event_calendar_lite"),e),onClick:()=>{u(!d)}},React.createElement("i",{className:t}),d&&React.createElement(s.StecDiv,{className:"stec-manage-list-filters-dropdown",onClick:e=>{e.stopPropagation()}},React.createElement(s.StecDiv,{className:"stec-manage-list-filters-dropdown-label"},(0,i.sprintf)(__("Filter by %s","stachethemes_event_calendar_lite"),e)),React.createElement(n.UncontrolledDatePicker,{includeTime:!1,title:__("Min date","stachethemes_event_calendar_lite"),defaultValue:a?.minDate||"",onChange:e=>{r({key:"min_date",value:e})}}),React.createElement(n.UncontrolledDatePicker,{includeTime:!1,title:__("Max date","stachethemes_event_calendar_lite"),defaultValue:a?.maxDate||"",onChange:e=>{r({key:"max_date",value:e})}})))};const p=function(e){const{calendar:t,category:a,location:n,organizer:r,guest:l,search:i,min_date:o,max_date:d}=e.postQueryArgs,[u,p]=(0,m.useState)({calendar:t||"",category:a||"",location:n||"",organizer:r||"",guest:l||"",min_date:o||"",max_date:d||""}),v=(e,t,a="array")=>{if("single"===a)return void p((a=>({...a,[e]:t})));const n=t.filter((e=>!0===e.active)).map((e=>e.value));p((t=>({...t,[e]:n.join(",")})))};return React.createElement(s.StecDiv,{className:"stec-manage-list-filterss"},React.createElement(s.StecDiv,{className:"stec-manage-list-filterss-buttons"},React.createElement(h,{selectedItems:u.calendar,activeItems:t,label:__("Calendars","stachethemes_event_calendar_lite"),icon:"fa-solid fa-calendar",taxonomy:"stec_cal",onChange:e=>{v("calendar",e)}}),React.createElement(h,{activeItems:a,selectedItems:u.category,label:__("Categories","stachethemes_event_calendar_lite"),icon:"fa-solid fa-folder",taxonomy:"stec_cat",onChange:e=>{v("category",e)}}),React.createElement(h,{activeItems:n,selectedItems:u.location,label:__("Locations","stachethemes_event_calendar_lite"),icon:"fa-solid fa-map",taxonomy:"stec_loc",onChange:e=>{v("location",e)}}),React.createElement(h,{activeItems:r,selectedItems:u.organizer,label:__("Organizers","stachethemes_event_calendar_lite"),icon:"fa-solid fa-user",taxonomy:"stec_org",onChange:e=>{v("organizer",e)}}),React.createElement(h,{activeItems:l,selectedItems:u.guest,label:__("Guests","stachethemes_event_calendar_lite"),icon:"fa-solid fa-star",taxonomy:"stec_gst",onChange:e=>{v("guest",e)}}),React.createElement(_,{label:__("Date","stachethemes_event_calendar_lite"),icon:"fa-solid fa-clock",activeValues:{minDate:o,maxDate:d},values:{minDate:u.min_date,maxDate:u.max_date},onChange:e=>{v(e.key,e.value,"single")}}),React.createElement(s.StecSpan,{className:"stec-manage-list-filterss-control-buttons"},React.createElement(s.StecSpan,{className:"stec-manage-list-filterss-apply",onClick:()=>{e.onApply(u)}},React.createElement("i",{className:"fa-solid fa-filter"}),__("Apply","stachethemes_event_calendar_lite")),React.createElement(s.StecSpan,{className:"stec-manage-list-filterss-clear",onClick:()=>{const t={calendar:"",category:"",location:"",organizer:"",guest:"",min_date:"",max_date:""};p(t),e.onApply(t)}},React.createElement("i",{className:"fa-solid fa-times"}),__("Clear","stachethemes_event_calendar_lite")))),React.createElement(c.UncontrolledDelayedInputText,{placeholder:__("Search","stachethemes_event_calendar_lite"),defaultValue:i||"",onChange:t=>{e.onApply({...u,search:t})}}))}},43824:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var n=a(58168),c=a(52779),r=a(85873),l=a(85262),s=a(57798),i=a(24292),o=a(22819),m=a(98196),d=a(91927),u=a(6405),h=a(13328),_=a(73772),p=a(26960),v=a(26878),f=a(60799),g=a(199);const __=_.__,_x=_._x,E=({isOpen:e,id:t,onClose:a,onDuplicate:n})=>{const[i,m]=(0,v.useState)(!1),[d,u]=(0,v.useState)(moment().format("YYYYMMDD")),h=moment(d).format("YYYY-MM-DD"),_=()=>{m(!1),a()};return React.createElement(s.default,{isOpen:e,onClose:_,headerIcon:"fa-solid fa-clone",title:__("Duplicate event","stachethemes_event_calendar_lite"),buttons:[React.createElement(c.default,{key:"duplicate",className:"blue",label:__("Duplicate","stachethemes_event_calendar_lite"),onClick:()=>{n({id:t,override:i,date:d})}}),React.createElement(c.default,{key:"cancel",className:"red",label:__("Cancel","stachethemes_event_calendar_lite"),onClick:_})]},React.createElement(l.default,{title:__("Recurrence override","stachethemes_event_calendar_lite"),description:__("Select to use the duplicate as a recurrence override","stachethemes_event_calendar_lite"),value:i,onChange:e=>{m(e)}}),i&&React.createElement(React.Fragment,null,React.createElement(o.default,null),React.createElement(r.default,{title:__("Recurrence date","stachethemes_event_calendar_lite"),description:__("Select recurrence date","stachethemes_event_calendar_lite"),value:h,includeTime:!1,onChange:e=>{const t=moment(e).format("YYYYMMDD");u(t)}})),React.createElement(o.default,null))},R=e=>{const{hasItemsRef:t,resetInstance:a}=e,n=(0,v.useRef)(!1),{activeMenuParams:c,setActiveMenu:r}=(0,d.useDashboardMenu)(),[l,s]=(0,v.useState)(!1),o=c.initialQueryArgs||{page:1,perPage:window.stecFilterManageEventsPerPage||20,permissionType:"edit_permission",includeUnapproved:1,postType:"stec_event",status:e.status},[_,R]=(0,v.useState)(o),{items:y,totalPages:D,ready:b,error:k}=(0,h.usePostItems)(_),[C,S]=(0,v.useState)([]),w=t=>{const a=y.filter((e=>e.id===t))[0];r({page:"events-upsert",params:{template:a,manageListQueryArgs:{..._},isArchivePage:"stec_archived"===e.status}})},x=(e,t={override:!1,date:!1})=>{if(!0===n.current)return void(0,f.toast)(__("Another action is in progress","stachethemes_event_calendar_lite"));const a=y.find((t=>t.id===e));if(!a)return void f.toast.error(__("Event not found","stachethemes_event_calendar_lite"));const c=(0,p.cloneDeep)(a);if(t.override){delete c.id,delete c.title.rendered,delete c.meta.rrule,delete c.meta.exdate,c.meta.recurrence_id=t.date;const e=moment.utc(c.meta.start_date),a=moment.utc(t.date);a.hours(e.hours()),a.minutes(e.minutes());const n=a.diff(e,"hours");c.meta.start_date=moment.utc(c.meta.start_date).add(n,"hours").format("YYYY-MM-DDTHH:mm"),c.meta.end_date=moment.utc(c.meta.end_date).add(n,"hours").format("YYYY-MM-DDTHH:mm")}else delete c.id,delete c.title.rendered,delete c.meta.uid;t.override||(c.title.raw=`${c.title.raw} (duplicate)`),f.toast.promise(new Promise(((e,t)=>{n.current=!0,async function(){try{const a=await(0,m.newApiPost)({route:"EVENTS",data:c,includeResponseStatus:!0}),{status:n,data:r}=a;return 201===n?(R((e=>({...e,seed:Date.now()}))),e(__("Duplicated","stachethemes_event_calendar_lite"))):t(__("Sorry, something went wrong","stachethemes_event_calendar_lite"))}catch(e){return t(e.message)}}()})),{loading:__("Duplicating","stachethemes_event_calendar_lite"),success:e=>(n.current=!1,e),error:e=>(n.current=!1,e)})},N=[{id:"select-all",label:__("Select all","stachethemes_event_calendar_lite"),onClick:()=>{C.length===y.length?S([]):S(y.map((e=>e.id)))},type:"checkbox",checked:C.length>0&&C.length===y.length},{id:"delete",color:"red",label:[React.createElement("i",{key:"icon",className:"fa-solid fa-trash"}),__("Delete","stachethemes_event_calendar_lite")],onClick:()=>{(()=>{if(!0!==n.current)return C.length<=0?f.toast.error(__("No items selected","stachethemes_event_calendar_lite")):void f.toast.promise(new Promise(((e,t)=>{n.current=!0,async function(){try{for await(let e of C)await(0,m.newApiDelete)({route:"EVENTS",args:`${e}?force=true`});return S([]),R((e=>({...e,page:1,seed:Date.now()}))),e(__("Items deleted","stachethemes_event_calendar_lite"))}catch(e){return t(e.message)}}()})),{loading:__("Deleting items","stachethemes_event_calendar_lite"),success:e=>(n.current=!1,e),error:e=>(n.current=!1,e)});(0,f.toast)(__("Another action is in progress","stachethemes_event_calendar_lite"))})()}}];"stec_archived"===e.status?N.push({id:"unarchive",color:"blue",label:[React.createElement("i",{key:"icon",className:"fa-solid fa-folder-open"}),__("Unarchive","stachethemes_event_calendar_lite")],onClick:()=>{(()=>{if(!0!==n.current)return C.length<=0?f.toast.error(__("No items selected","stachethemes_event_calendar_lite")):void f.toast.promise(new Promise(((e,t)=>{n.current=!0,async function(){try{for await(let e of C)await(0,m.newApiPut)({route:"EVENTS/UNARCHIVE",args:`${e}`});return S([]),R((e=>({...e,page:1,seed:Date.now()}))),e(__("Items unarchived","stachethemes_event_calendar_lite"))}catch(e){return t(e.message)}}()})),{loading:__("Unarchiving items","stachethemes_event_calendar_lite"),success:e=>(n.current=!1,e),error:e=>(n.current=!1,e)});(0,f.toast)(__("Another action is in progress","stachethemes_event_calendar_lite"))})()}}):N.push({id:"archive",color:"blue",label:[React.createElement("i",{key:"icon",className:"fa-solid fa-box-archive"}),__("Archive","stachethemes_event_calendar_lite")],onClick:()=>{(()=>{if(!0!==n.current)return C.length<=0?f.toast.error(__("No items selected","stachethemes_event_calendar_lite")):void f.toast.promise(new Promise(((e,t)=>{n.current=!0,async function(){try{for await(let e of C)await(0,m.newApiPut)({route:"EVENTS/ARCHIVE",args:`${e}`});return S([]),R((e=>({...e,page:1,seed:Date.now()}))),e(__("Items archived","stachethemes_event_calendar_lite"))}catch(e){return t(e.message)}}()})),{loading:__("Archiving items","stachethemes_event_calendar_lite"),success:e=>(n.current=!1,e),error:e=>(n.current=!1,e)});(0,f.toast)(__("Another action is in progress","stachethemes_event_calendar_lite"))})()}});const I=[{id:"select-item",onClick:e=>{C.some((t=>e===t))?S(C.filter((t=>t!==e))):S([...C,e])}},{id:"title",onClick:e=>{w(e)}},{id:"approve",color:"green",icon:React.createElement("i",{key:"icon",className:"fa-solid fa-thumbs-up"}),label:__("Approve","stachethemes_event_calendar_lite"),onClick:e=>{(e=>{if(!0===n.current)return void(0,f.toast)(__("Another action is in progress","stachethemes_event_calendar_lite"));const t=y.find((t=>t.id===e));if(!t)return void f.toast.error(__("Event not found","stachethemes_event_calendar_lite"));const a=(0,p.cloneDeep)(t);f.toast.promise(new Promise(((e,t)=>{n.current=!0,async function(){try{return await(0,m.newApiPut)({route:"EVENTS",args:a.id,data:a}),R((e=>({...e,seed:Date.now()}))),e(__("Event approved","stachethemes_event_calendar_lite"))}catch(e){return t(e.message)}}()})),{loading:__("Approving","stachethemes_event_calendar_lite"),success:e=>(n.current=!1,e),error:e=>(n.current=!1,e)})})(e)}},{id:"view",color:"blue",icon:React.createElement("i",{key:"icon",className:"fa-solid fa-eye"}),label:__("View","stachethemes_event_calendar_lite"),onClick:e=>{const t=y.find((t=>t.id===e)).link;window.open(t,"_blank")}},{id:"duplicate",color:"blue",icon:React.createElement("i",{key:"icon",className:"fa-solid fa-clone"}),label:__("Duplicate","stachethemes_event_calendar_lite"),onClick:e=>{const t=y.find((t=>t.id===e));t.meta.rrule&&!t.meta.recurrence_id?s(e):x(e)}},{id:"edit",color:"blue",icon:React.createElement("i",{key:"icon",className:"fa-solid fa-edit"}),label:__("Edit","stachethemes_event_calendar_lite"),onClick:e=>{w(e)}},{id:"delete",color:"red",icon:React.createElement("i",{key:"icon",className:"fa-solid fa-trash"}),label:__("Delete","stachethemes_event_calendar_lite"),onClick:e=>{(e=>{!0!==n.current?f.toast.promise(new Promise(((t,a)=>{n.current=!0,async function(){try{return await(0,m.newApiDelete)({route:"EVENTS",args:e}),S([]),R((e=>({...e,page:1,seed:Date.now()}))),t(__("Deleted","stachethemes_event_calendar_lite"))}catch(e){return a(e.message)}}()})),{loading:__("Deleting","stachethemes_event_calendar_lite"),success:e=>(n.current=!1,e),error:e=>(n.current=!1,e)}):(0,f.toast)(__("Another action is in progress","stachethemes_event_calendar_lite"))})(e)}}],M=e=>{try{return{type:e.meta.thumbnail.type,icon:e.meta.thumbnail.icon,image:e.meta.thumbnail?.image?.[0]?.sizes?.thumbnail,backgroundColor:e.meta.color,color:"#fff",day:"DD",month:"MMM"}}catch(e){return{type:"icon",icon:"fa-solid fa-question",image:[],backgroundColor:"#000",color:"#fff",day:"DD",month:"MMM"}}},A=y.map((e=>{let t=[];0===e.meta.approved&&t.push({id:"unapproved",label:_x("Pending approval","Manage events tag label","stachethemes_event_calendar_lite"),color:"#ff9933"}),e.meta.featured&&t.push({id:"featured",label:_x("Featured","Manage events tag label","stachethemes_event_calendar_lite"),color:"#ed1c16"}),""!==e.meta.rrule&&t.push({id:"recurrent",label:__("Recurrent","stachethemes_event_calendar_lite"),title:_x("Recurrent event","Manage events tag title","stachethemes_event_calendar_lite"),color:"#4285f4"}),e.meta.recurrence_id&&t.push({id:"override",label:_x("Recurrence override","Manage events tag label for recurrence override","stachethemes_event_calendar_lite"),title:__("Recurrence override","stachethemes_event_calendar_lite"),color:"#ff9933"});let a=((e,t)=>{const a=STEC_VARIABLES?.show_tz_offset||!1,n=STEC_VARIABLES?.use_user_tz||!1,c=moment.tz(e,t);n&&c.local();let r=(0,u.beautifyDate)(c,!1);a&&(r=`${r} (${(0,u.getUtcOffset)(c)})`);return r})(e.meta.start_date,e.timezone);return{key:e.id,id:e.id,title:`${e.title.raw} (#${e.id})`,description:a,tags:t,thumbnail:M(e),controls:I.filter((t=>("duplicate"!==t.id||0!==e.meta.approved)&&("approve"!==t.id||0===e.meta.approved&&(0,u.canModerateCalendar)(e.stec_cal[0])))),checked:C.some((t=>e.id===t))}}));return t.current=y.length>0,React.createElement(React.Fragment,null,React.createElement(E,{isOpen:!!l,id:l,onClose:()=>{s(!1)},onDuplicate:({id:e,override:t,date:a})=>{t?x(e,{override:t,date:a}):x(e),s(!1)}}),React.createElement(g.default,{postQueryArgs:_,onApply:e=>{S([]),R((t=>({...t,...e,page:1})))}}),React.createElement(i.default,{controls:N,totalPages:D,currentPage:_.page,onPageChange:e=>{(e=>{S([]),R({..._,page:e})})(e)},items:A,ready:b}))};const y=function(e){const[t,a]=(0,v.useState)(0);return React.createElement(R,(0,n.default)({key:t},e,{resetInstance:()=>{a(Date.now())}}))}}}]);