"use strict";(globalThis.webpackChunkstec=globalThis.webpackChunkstec||[]).push([[8168],{42743:(e,t,a)=>{a.r(t),a.d(t,{InputSocialLinks:()=>h,UncontrolledInputSocialLinks:()=>d,default:()=>_});var n=a(8403),r=a(73772),l=a(26960),c=a(26878),s=a(52779),i=a(75761),o=a(78565),m=a(77160),u=a(32488);const __=r.__,d=e=>{const[t,a]=(0,c.useState)(e.defaultLinks);return React.createElement(n.StecDiv,{className:"stec-input-social-links"},React.createElement(o.default,{text:e.title}),t.map(((r,c)=>React.createElement(n.StecDiv,{key:c,className:"stec-input-social-link-item"},React.createElement(m.default,{value:r.icon,onPick:n=>{((n,r)=>{const c=(0,l.cloneDeep)(t);c[r].icon=n,a(c),e.onChange&&e.onChange(c)})(n,c)}}),React.createElement(u.InputText,{value:r.url,placeholder:__("Social link URL","stachethemes_event_calendar_lite"),onChange:n=>{((n,r)=>{const c=(0,l.cloneDeep)(t);c[r].url=n,a(c),e.onChange&&e.onChange(c)})(n,c)}}),React.createElement(n.StecSpan,{className:"stec-input-social-link-item-remove",onClick:()=>{(n=>{const r=(0,l.cloneDeep)(t).filter(((e,t)=>t!==n));a(r),e.onChange&&e.onChange(r)})(c)}},React.createElement("i",{className:"fa-solid fa-times"}))))),React.createElement(s.default,{className:"blue",label:__("Add social link","stachethemes_event_calendar_lite"),onClick:()=>{const n=(0,l.cloneDeep)(t);n.push({icon:"",url:""}),a(n),e.onChange&&e.onChange(n)}}),React.createElement(i.default,{text:e.description}))},h=e=>{const t=e.value;return React.createElement(n.StecDiv,{className:"stec-input-social-links"},React.createElement(o.default,{text:e.title}),e.links.map(((a,r)=>React.createElement(n.StecDiv,{key:r,className:"stec-input-social-link-item"},React.createElement(m.default,{value:a.icon,onPick:a=>{((a,n)=>{const r=(0,l.cloneDeep)(t);r[n].icon=a,e.onChange(r)})(a,r)}}),React.createElement(u.InputText,{value:a.url,placeholder:__("Social link URL","stachethemes_event_calendar_lite"),onChange:a=>{((a,n)=>{const r=(0,l.cloneDeep)(t);r[n].url=a,e.onChange(r)})(a,r)}}),React.createElement(n.StecSpan,{className:"stec-input-social-link-item-remove",onClick:()=>{(a=>{const n=(0,l.cloneDeep)(t).filter(((e,t)=>t!==a));e.onChange(n)})(r)}},React.createElement("i",{className:"fa-solid fa-times"}))))),React.createElement(s.default,{className:"blue",label:__("Add social link","stachethemes_event_calendar_lite"),onClick:()=>{const a=(0,l.cloneDeep)(t);a.push({icon:"",url:""}),e.onChange(a)}}),React.createElement(i.default,{text:e.description}))},_=h},68168:(e,t,a)=>{a.r(t),a.d(t,{UpsertForm:()=>T,default:()=>x});var n=a(52779),r=a(93699),l=a(85262),c=a(62552),s=a(59249),i=a(32779),o=a(42743),m=a(32488),u=a(39393),d=a(48596),h=a(22819),_=a(98196),p=a(91927),g=a(81148),f=a(6405),R=a(13328),v=a(8403),E=a(73772),y=a(26960),C=a(26878),k=a(60799),b=a(26445);const __=E.__,S=e=>{const{wasSubmitted:t,focusFieldsRef:a,postData:n}=e,{items:r,ready:l,error:c}=(0,R.usePermissions)();return!l||c?null:React.createElement(React.Fragment,null,React.createElement(R.WithMaybeDisplayPermissions,{type:"edit_permission"},React.createElement(h.default,null),React.createElement(i.UncontrolledInputSelect,{ref:e=>a.current.edit_permission=e,multiple:!0,title:__("Edit permission","stachethemes_event_calendar_lite"),options:r.filter((e=>"stec_public"!==e.value)),defaultValue:n.current.meta.edit_permission,description:__("Who can edit this organizer","stachethemes_event_calendar_lite"),required:!0,errorMessage:__("The edit permission cannot be empty","stachethemes_event_calendar_lite"),wasSubmitted:t,onChange:e=>{n.current.meta.edit_permission=e}})),React.createElement(R.WithMaybeDisplayPermissions,{type:"use_permission"},React.createElement(h.default,null),React.createElement(i.UncontrolledInputSelect,{ref:e=>a.current.use_permission=e,multiple:!0,title:__("Use permission","stachethemes_event_calendar_lite"),options:r,defaultValue:n.current.meta.use_permission,description:__("Who can add this organizer to their events","stachethemes_event_calendar_lite"),required:!0,errorMessage:__("The use permission cannot be empty","stachethemes_event_calendar_lite"),wasSubmitted:t,onChange:e=>{n.current.meta.use_permission=e}})))};function T(e){const[t,a]=(0,C.useState)(!1),[i,p]=(0,C.useState)(0),R=(0,C.useRef)(!1),v=b.default,E=(0,C.useRef)((0,y.cloneDeep)(e.template?e.template:v)),T=(0,C.useRef)([]),x=(e,t=!0)=>{E.current=t?(0,y.cloneDeep)(e):e,p((0,y.uniqueId)())},w=E.current.id?[React.createElement("i",{key:"icon",className:"fa-solid fa-pen-to-square"}),__("Edit organizer","stachethemes_event_calendar_lite")]:[React.createElement("i",{key:"icon",className:"fa-solid fa-plus"}),__("Add new organizer","stachethemes_event_calendar_lite")];return React.createElement(d.default,{title:w,key:i},React.createElement(g.default,{postData:E}),React.createElement(h.default,null),React.createElement(s.UncontrolledInputImages,{multiple:!1,defaultValue:E.current.meta.photo,title:__("Photo","stachethemes_event_calendar_lite"),buttonTitle:__("Add Photo","stachethemes_event_calendar_lite"),description:__("Add photo for this organizer from the WordPress Media Library","stachethemes_event_calendar_lite"),onChange:e=>{E.current.meta.photo=e.map((e=>(e.dimensions&&delete e.dimensions,e)))}}),React.createElement(h.default,null),React.createElement(m.UncontrolledInputText,{ref:e=>T.current.name=e,title:__("Name"),defaultValue:E.current.name,placeholder:__("Organizer name","stachethemes_event_calendar_lite"),description:__("Organizer display name"),required:!0,regex:(0,f.getRegexByType)("title"),errorMessage:__("The organizer must have a name","stachethemes_event_calendar_lite"),wasSubmitted:t,onChange:e=>{E.current.name=e}}),React.createElement(h.default,null),React.createElement(m.UncontrolledInputText,{ref:e=>T.current.slug=e,title:__("Slug"),defaultValue:E.current.slug,placeholder:__("Organizer slug","stachethemes_event_calendar_lite"),description:__("Leave empty to auto-generate"),required:!1,regex:(0,f.getRegexByType)("slug"),errorMessage:__("The organizer must have a valid slug","stachethemes_event_calendar_lite"),onChange:e=>{E.current.slug=e},wasSubmitted:t}),STEC_VARIABLES?.current_user?.capability?.verify_persons&&React.createElement(React.Fragment,null,React.createElement(h.default,null),React.createElement(l.UncontrolledInputCheckbox,{title:__("Verified Organizer","stachethemes_event_calendar_lite"),defaultValue:E.current.meta.verified,onChange:e=>{E.current.meta.verified=e},description:__("Verified organizers display a trustworthiness badge on the front-end","stachethemes_event_calendar_lite")})),React.createElement(h.default,null),React.createElement(c.UncontrolledInputColor,{title:__("Color","stachethemes_event_calendar_lite"),defaultValue:E.current.meta.color,description:__("Organizer color","stachethemes_event_calendar_lite"),onChange:e=>{E.current.meta.color=e}}),React.createElement(h.default,null),React.createElement(u.UncontrolledInputTextarea,{title:__("Description","stachethemes_event_calendar_lite"),description:__("About this Organizer","stachethemes_event_calendar_lite"),defaultValue:E.current.description,onChange:e=>{E.current.description=e}}),React.createElement(h.default,null),React.createElement(o.UncontrolledInputSocialLinks,{title:__("Social Links","stachethemes_event_calendar_lite"),description:__("Social links like Facebook, Twitter, Instagram...","stachethemes_event_calendar_lite"),defaultLinks:E.current.meta.social,onChange:e=>{E.current.meta.social=e}}),React.createElement(h.default,null),React.createElement(m.UncontrolledInputText,{ref:e=>T.current.email=e,type:"email",title:__("Email","stachethemes_event_calendar_lite"),placeholder:__("Email","stachethemes_event_calendar_lite"),description:__("Contact email","stachethemes_event_calendar_lite"),defaultValue:E.current.meta.email,regex:(0,f.getRegexByType)("email"),errorMessage:__("Invalid email","stachethemes_event_calendar_lite"),wasSubmitted:t,onChange:e=>{E.current.meta.email=e}}),React.createElement(h.default,null),React.createElement(S,{postData:E,focusFieldsRef:T,wasSubmitted:t}),React.createElement(h.default,null),React.createElement(n.default,{label:E.current.id?__("Update","stachethemes_event_calendar_lite"):__("Create","stachethemes_event_calendar_lite",0),className:"green",onClick:()=>{if(!0!==R.current){if(a(!0),!1===(()=>{const e=[{id:"name",regex:(0,f.getRegexByType)("title"),meta:!1,errorMessage:__("The organizer must have a name","stachethemes_event_calendar_lite")},{id:"slug",regex:(0,f.getRegexByType)("slug"),meta:!1,errorMessage:__("The organizer must have a valid slug","stachethemes_event_calendar_lite")},{id:"email",regex:(0,f.getRegexByType)("email"),meta:!0,errorMessage:__("Invalid email","stachethemes_event_calendar_lite")},{id:"use_permission",meta:!0,errorMessage:__("The use permission cannot be empty","stachethemes_event_calendar_lite")},{id:"edit_permission",meta:!0,errorMessage:__("The edit permission cannot be empty","stachethemes_event_calendar_lite")}];for(let t in e){const a=e[t],n=a.meta?E.current.meta[a.id]:E.current[a.id];let r=!0;if(r=a.regex?new RegExp(a.regex).test(n):Array.isArray(n)?n.length>0:!(!n||""===n),!1===r)return T.current[a.id]&&T.current[a.id].focus(),k.toast.error(a.errorMessage),!1}return!0})())return!1;k.toast.promise(new Promise(((t,a)=>{R.current=!0,async function(){try{let n;n=E.current.id?await(0,_.newApiPut)({route:"ORGANIZERS",args:E.current.id,data:E.current,includeResponseStatus:!0,errorMessage:"auto"}):await(0,_.newApiPost)({route:"ORGANIZERS",data:E.current,includeResponseStatus:!0,translateErrorCode:{term_exists:__("An organizer with this name already exists","stachethemes_event_calendar_lite")},errorMessage:"auto"});const{status:r,data:l}=n;switch(r){case 201:return e.onOrganizerInserted&&e.onOrganizerInserted(l),x(l),(0,_.flushApiCache)({group:"taxonomy-stec_org"}),t(__("Created","stachethemes_event_calendar_lite"));case 200:return e.onOrganizerInserted&&e.onOrganizerInserted(l),x(l),(0,_.flushApiCache)({group:"taxonomy-stec_org"}),t(__("Updated","stachethemes_event_calendar_lite"));default:return a(__("Sorry, something went wrong","stachethemes_event_calendar_lite"))}}catch(e){return a(e.message)}}()})),{loading:__("Saving","stachethemes_event_calendar_lite"),success:e=>(R.current=!1,e),error:e=>(R.current=!1,e)})}else(0,k.toast)(__("Another action is in progress","stachethemes_event_calendar_lite"))}}),React.createElement(n.default,{label:__("Reset form","stachethemes_event_calendar_lite"),className:"yellow",style:{marginLeft:5},onClick:()=>{x(v),a(!1),(0,k.toast)(__("The form has been reset","stachethemes_event_calendar_lite"))}}),E.current.id&&React.createElement(r.default,{label:__("Delete","stachethemes_event_calendar_lite"),className:"red",style:{marginLeft:5},onClick:()=>{!0!==R.current?k.toast.promise(new Promise(((t,a)=>{R.current=!0,async function(){try{await(0,_.newApiDelete)({route:"ORGANIZERS",args:E.current.id});e.onOrganizerDeleted&&e.onOrganizerDeleted(E.current);const a=(0,y.cloneDeep)(E.current);return a.id="",x(a,!1),(0,_.flushApiCache)({group:"taxonomy-stec_org"}),t(__("Deleted","stachethemes_event_calendar_lite"))}catch(e){return a(e.message)}}()})),{loading:__("Deleting","stachethemes_event_calendar_lite"),success:e=>(R.current=!1,e),error:e=>(R.current=!1,e)}):(0,k.toast)(__("Another action is in progress","stachethemes_event_calendar_lite"))}}),React.createElement(n.default,{label:__("Back","stachethemes_event_calendar_lite"),className:"blue",style:{marginLeft:5},onClick:()=>{const t=!E.current.id;e.onBack(t)}}))}const x=function(){const{setActiveMenu:e,activeMenuParams:t}=(0,p.useDashboardMenu)(),a=a=>{let n=t.manageListQueryArgs||null;a&&(n=null),e({page:"organizers-list",params:{initialQueryArgs:n}})};return React.createElement(React.Fragment,null,React.createElement(v.StecDiv,{className:"stec-dashboard-top-nav"},React.createElement(n.default,{className:"stcolor stec-dashboard-home-button",label:[React.createElement("i",{key:"icon",className:"fa-solid fa-home"}),__("Home","stachethemes_event_calendar_lite")],onClick:()=>{e({page:"home",params:{}})}}),React.createElement(n.default,{className:"blue",label:[React.createElement("i",{key:"icon",className:"fa-solid fa-list"}),__("Manage organizers","stachethemes_event_calendar_lite")],onClick:a})),React.createElement(T,{template:t.template||!1,onBack:e=>{a(e)}}))}},26445:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});const n=void 0!==window.STEC_ORGANIZER_TEMPLATE?window.STEC_ORGANIZER_TEMPLATE:{name:"",slug:"",status:"publish",description:"",meta:{author:"",color:"#B4CFB0",photo:[],email:"",social:[],read_permission:["stec_public"],use_permission:["stec_private"],edit_permission:["stec_private"]}}}}]);