"use strict";(globalThis.webpackChunkstec=globalThis.webpackChunkstec||[]).push([[9998],{85873:(e,t,a)=>{a.r(t),a.d(t,{DatePicker:()=>u,UncontrolledDatePicker:()=>i,default:()=>d});var l=a(8403),n=a(26878),r=a(75761),c=a(78565),s=a(10382);const i=React.forwardRef(((e,t)=>{const[a,i]=(0,n.useState)(e.defaultValue),[u,d]=(0,n.useState)(!1),[o,m]=(0,n.useState)(!1),_=a.split("T"),h=_[0],v=_[1]||"00:00";(0,n.useEffect)((()=>{if((u||e.wasSubmitted)&&e.required){const t=new RegExp(/[0-9]{4}-[0-9]{2}-[0-9]{2}(T[0-9]{2}:[0-9]{2})?/).test(a);if(m(!1===t),t){const t=moment(a),l=!!e.min&&moment(e.min),n=!!e.max&&moment(e.max);l&&t.isBefore(l)&&m(!0),n&&t.isAfter(n)&&m(!0)}}}),[e.required,a,e.wasSubmitted,u,e.min,e.max]);const p=t=>{if(!1===moment(t).isValid()){let a=e.min?moment(e.min):moment();const l=e.includeTime?"YYYY-MM-DDTHH:mm":"YYYY-MM-DD";t=a.format(l)}i(t),e.onChange(t)};return React.createElement(l.StecDiv,{className:"stec-datepicker"},React.createElement(c.default,{text:e.title}),React.createElement(l.StecDiv,{className:e.includeTime?"stec-datepicker-inputs":""},React.createElement("input",{className:"stec-datepicker-inputs-date",ref:t,type:"date",value:h,onChange:e=>{const t=e.target.value+"T"+v;p(t)},min:e.min,max:e.max,onBlur:()=>{d(!0)}}),e.includeTime&&React.createElement("input",{type:"time",className:"stec-datepicker-inputs-time",value:v,onBlur:()=>{d(!0)},onChange:e=>{const t=h+"T"+e.target.value;p(t)}})),React.createElement(s.default,{floating:!0,text:e.errorMessage,display:o}),React.createElement(r.default,{text:e.description}))}));i.displayName="UncontrolledDatePicker";const u=React.forwardRef(((e,t)=>{const[a,i]=(0,n.useState)(!1),[u,d]=(0,n.useState)(!1);(0,n.useEffect)((()=>{if((a||e.wasSubmitted)&&e.required){const t=new RegExp(/[0-9]{4}-[0-9]{2}-[0-9]{2}(T[0-9]{2}:[0-9]{2})?/).test(e.value);if(d(!1===t),t){const t=moment(e.value),a=!!e.min&&moment(e.min),l=!!e.max&&moment(e.max);a&&t.isBefore(a)&&d(!0),l&&t.isAfter(l)&&d(!0)}}}),[e.max,e.min,e.required,e.value,e.wasSubmitted,a]);const o=t=>{if(!1===moment(t).isValid()){let a=e.min?moment(e.min):moment();const l=e.includeTime?"YYYY-MM-DD\\THH:mm":"YYYY-MM-DD";t=a.format(l)}e.onChange(t)},m=e.value.split("T"),_=m[0],h=m[1]||"00:00";return React.createElement(l.StecDiv,{className:"stec-datepicker"},React.createElement(c.default,{text:e.title}),React.createElement(l.StecDiv,{className:e.includeTime?"stec-datepicker-inputs":""},React.createElement("input",{ref:t,className:"stec-datepicker-inputs-date",type:"date",value:_,onChange:e=>{const t=e.target.value+"T"+h;o(t)},min:e.min,max:e.max,onBlur:()=>{i(!0)}}),e.includeTime&&React.createElement("input",{type:"time",className:"stec-datepicker-inputs-time",value:h,onBlur:()=>{i(!0)},onChange:e=>{const t=_+"T"+e.target.value;o(t)}})),React.createElement(s.default,{floating:!0,text:e.errorMessage,display:u}),React.createElement(r.default,{text:e.description}))}));u.displayName="DatePicker";const d=u},68876:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var l=a(78565),n=a(75761),r=a(8403);const c=({title:e,value:t,description:a,onChange:c})=>React.createElement(r.StecDiv,{className:"stec-radio-wrapper"},React.createElement("label",null,React.createElement("input",{type:"radio",checked:t,onChange:c}),React.createElement(l.default,{text:e})),React.createElement(n.default,{text:a}))},94508:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var l=a(8403);const n=function(e){return React.createElement(l.StecDiv,{className:"stec-page-heading"},e.label)}},12222:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var l=a(8403),n=a(73772),r=a(26878),c=a(52779),s=a(85873),i=a(75761),u=a(78565),d=a(68876),o=a(32779),m=a(32488),_=a(22819);const __=n.__,h=({display:e,value:t,onExdateChange:a})=>{const[n,i]=(0,r.useState)(""),u=Array.isArray(t)?t:[];return(0,r.useEffect)((()=>{!1===e&&t.length>0&&a([])}),[e,a,t.length]),!1===e?"":React.createElement(React.Fragment,null,React.createElement(_.default,null),React.createElement(l.StecDiv,{className:"stec-rrule-generator-exdates"},React.createElement(s.default,{value:n,title:__("EXDATE","stachethemes_event_calendar_lite"),description:__("Add date exception","stachethemes_event_calendar_lite"),onChange:e=>{i(e)}}),React.createElement(c.default,{className:"blue",label:__("Add Exdate","stachethemes_event_calendar_lite"),onClick:()=>{n&&!0===moment(n).isValid()&&!1===u.includes(n)&&a([...u,n])}})),u.length>0&&u.map((e=>React.createElement(l.StecSpan,{key:e,className:"stec-rrule-exdate"},React.createElement(l.StecSpan,null,e),React.createElement("i",{className:"fas fa-times",onClick:()=>{const t=u.filter((t=>t!==e));a(t)}})))))},v=({title:e,description:t,rrule:a,min:n,manual:r,onModeChange:c,onRRuleChange:v,onExdateChange:p,exdate:E,absoluteDropdown:y=!1})=>{const f=[{value:"",label:__("Disabled","stachethemes_event_calendar_lite")},{value:"daily",label:__("Daily","stachethemes_event_calendar_lite")},{value:"weekly",label:__("Weekly","stachethemes_event_calendar_lite")},{value:"monthly-by-day",label:__("Monthly by day","stachethemes_event_calendar_lite")},{value:"monthly-by-date",label:__("Monthly by date","stachethemes_event_calendar_lite")},{value:"yearly-by-day",label:__("Yearly by day","stachethemes_event_calendar_lite")},{value:"yearly-by-date",label:__("Yearly by date","stachethemes_event_calendar_lite")},{value:"manual",label:__("Manual Mode (Advanced)","stachethemes_event_calendar_lite")}],g=[{value:1,label:__("Every day","stachethemes_event_calendar_lite")},{value:2,label:__("Every other day","stachethemes_event_calendar_lite")},{value:3,label:__("Every 3rd day","stachethemes_event_calendar_lite")},{value:4,label:__("Every 4th day","stachethemes_event_calendar_lite")},{value:5,label:__("Every 5th day","stachethemes_event_calendar_lite")},{value:6,label:__("Every 6th day","stachethemes_event_calendar_lite")},{value:7,label:__("Every 7th day","stachethemes_event_calendar_lite")},{value:8,label:__("Every 8th day","stachethemes_event_calendar_lite")},{value:9,label:__("Every 9th day","stachethemes_event_calendar_lite")},{value:10,label:__("Every 10th day","stachethemes_event_calendar_lite")},{value:11,label:__("Every 11th day","stachethemes_event_calendar_lite")},{value:12,label:__("Every 12th day","stachethemes_event_calendar_lite")},{value:13,label:__("Every 13th day","stachethemes_event_calendar_lite")},{value:14,label:__("Every 14th day","stachethemes_event_calendar_lite")},{value:15,label:__("Every 15th day","stachethemes_event_calendar_lite")},{value:16,label:__("Every 16th day","stachethemes_event_calendar_lite")},{value:17,label:__("Every 17th day","stachethemes_event_calendar_lite")},{value:18,label:__("Every 18th day","stachethemes_event_calendar_lite")},{value:19,label:__("Every 19th day","stachethemes_event_calendar_lite")},{value:20,label:__("Every 20th day","stachethemes_event_calendar_lite")},{value:21,label:__("Every 21st day","stachethemes_event_calendar_lite")},{value:22,label:__("Every 22nd day","stachethemes_event_calendar_lite")},{value:23,label:__("Every 23rd day","stachethemes_event_calendar_lite")},{value:24,label:__("Every 24th day","stachethemes_event_calendar_lite")},{value:25,label:__("Every 25th day","stachethemes_event_calendar_lite")},{value:26,label:__("Every 26th day","stachethemes_event_calendar_lite")},{value:27,label:__("Every 27th day","stachethemes_event_calendar_lite")},{value:28,label:__("Every 28th day","stachethemes_event_calendar_lite")},{value:29,label:__("Every 29th day","stachethemes_event_calendar_lite")},{value:30,label:__("Every 30th day","stachethemes_event_calendar_lite")}],R=[{value:1,label:__("Every week","stachethemes_event_calendar_lite")},{value:2,label:__("Every other week","stachethemes_event_calendar_lite")},{value:3,label:__("Every 3rd week","stachethemes_event_calendar_lite")},{value:4,label:__("Every 4th week","stachethemes_event_calendar_lite")},{value:5,label:__("Every 5th week","stachethemes_event_calendar_lite")},{value:6,label:__("Every 6th week","stachethemes_event_calendar_lite")},{value:7,label:__("Every 7th week","stachethemes_event_calendar_lite")},{value:8,label:__("Every 8th week","stachethemes_event_calendar_lite")},{value:9,label:__("Every 9th week","stachethemes_event_calendar_lite")},{value:10,label:__("Every 10th week","stachethemes_event_calendar_lite")},{value:11,label:__("Every 11th week","stachethemes_event_calendar_lite")},{value:12,label:__("Every 12th week","stachethemes_event_calendar_lite")},{value:13,label:__("Every 13th week","stachethemes_event_calendar_lite")},{value:14,label:__("Every 14th week","stachethemes_event_calendar_lite")},{value:16,label:__("Every 15th week","stachethemes_event_calendar_lite")},{value:17,label:__("Every 16th week","stachethemes_event_calendar_lite")},{value:18,label:__("Every 17th week","stachethemes_event_calendar_lite")},{value:19,label:__("Every 18th week","stachethemes_event_calendar_lite")},{value:20,label:__("Every 19th week","stachethemes_event_calendar_lite")},{value:21,label:__("Every 20th week","stachethemes_event_calendar_lite")},{value:22,label:__("Every 21st week","stachethemes_event_calendar_lite")},{value:23,label:__("Every 22nd week","stachethemes_event_calendar_lite")},{value:24,label:__("Every 23rd week","stachethemes_event_calendar_lite")},{value:25,label:__("Every 25th week","stachethemes_event_calendar_lite")},{value:26,label:__("Every 26th week","stachethemes_event_calendar_lite")}],b=[{value:"MO",label:__("Monday","stachethemes_event_calendar_lite")},{value:"TU",label:__("Tuesday","stachethemes_event_calendar_lite")},{value:"WE",label:__("Wednesday","stachethemes_event_calendar_lite")},{value:"TH",label:__("Thursday","stachethemes_event_calendar_lite")},{value:"FR",label:__("Friday","stachethemes_event_calendar_lite")},{value:"SA",label:__("Saturday","stachethemes_event_calendar_lite")},{value:"SU",label:__("Sunday","stachethemes_event_calendar_lite")}],T=[{value:1,label:__("Every month","stachethemes_event_calendar_lite")},{value:2,label:__("Every other month","stachethemes_event_calendar_lite")},{value:3,label:__("Every 3rd month","stachethemes_event_calendar_lite")},{value:4,label:__("Every 4th month","stachethemes_event_calendar_lite")},{value:5,label:__("Every 5th month","stachethemes_event_calendar_lite")},{value:6,label:__("Every 6th month","stachethemes_event_calendar_lite")},{value:7,label:__("Every 7th month","stachethemes_event_calendar_lite")},{value:8,label:__("Every 8th month","stachethemes_event_calendar_lite")},{value:9,label:__("Every 9th month","stachethemes_event_calendar_lite")},{value:10,label:__("Every 10th month","stachethemes_event_calendar_lite")},{value:11,label:__("Every 11th month","stachethemes_event_calendar_lite")},{value:12,label:__("Every 12th month","stachethemes_event_calendar_lite")},{value:18,label:__("Every 18th month","stachethemes_event_calendar_lite")},{value:24,label:__("Every 24th month","stachethemes_event_calendar_lite")},{value:36,label:__("Every 36th month","stachethemes_event_calendar_lite")},{value:48,label:__("Every 48th week","stachethemes_event_calendar_lite")}],C=[{value:"1MO",label:__("1st Monday","stachethemes_event_calendar_lite")},{value:"1TU",label:__("1st Tuesday","stachethemes_event_calendar_lite")},{value:"1WE",label:__("1st Wednesday","stachethemes_event_calendar_lite")},{value:"1TH",label:__("1st Thursday","stachethemes_event_calendar_lite")},{value:"1FR",label:__("1st Friday","stachethemes_event_calendar_lite")},{value:"1SA",label:__("1st Saturday","stachethemes_event_calendar_lite")},{value:"1SU",label:__("1st Sunday","stachethemes_event_calendar_lite")},{value:"2MO",label:__("2nd Monday","stachethemes_event_calendar_lite")},{value:"2TU",label:__("2nd Tuesday","stachethemes_event_calendar_lite")},{value:"2WE",label:__("2nd Wednesday","stachethemes_event_calendar_lite")},{value:"2TH",label:__("2nd Thursday","stachethemes_event_calendar_lite")},{value:"2FR",label:__("2nd Friday","stachethemes_event_calendar_lite")},{value:"2SA",label:__("2nd Saturday","stachethemes_event_calendar_lite")},{value:"2SU",label:__("2nd Sunday","stachethemes_event_calendar_lite")},{value:"3MO",label:__("3rd Monday","stachethemes_event_calendar_lite")},{value:"3TU",label:__("3rd Tuesday","stachethemes_event_calendar_lite")},{value:"3WE",label:__("3rd Wednesday","stachethemes_event_calendar_lite")},{value:"3TH",label:__("3rd Thursday","stachethemes_event_calendar_lite")},{value:"3FR",label:__("3rd Friday","stachethemes_event_calendar_lite")},{value:"3SA",label:__("3rd Saturday","stachethemes_event_calendar_lite")},{value:"3SU",label:__("3rd Sunday","stachethemes_event_calendar_lite")},{value:"4MO",label:__("4th Monday","stachethemes_event_calendar_lite")},{value:"4TU",label:__("4th Tuesday","stachethemes_event_calendar_lite")},{value:"4WE",label:__("4th Wednesday","stachethemes_event_calendar_lite")},{value:"4TH",label:__("4th Thursday","stachethemes_event_calendar_lite")},{value:"4FR",label:__("4th Friday","stachethemes_event_calendar_lite")},{value:"4SA",label:__("4th Saturday","stachethemes_event_calendar_lite")},{value:"4SU",label:__("4th Sunday","stachethemes_event_calendar_lite")},{value:"5MO",label:__("5th Monday","stachethemes_event_calendar_lite")},{value:"5TU",label:__("5th Tuesday","stachethemes_event_calendar_lite")},{value:"5WE",label:__("5th Wednesday","stachethemes_event_calendar_lite")},{value:"5TH",label:__("5th Thursday","stachethemes_event_calendar_lite")},{value:"5FR",label:__("5th Friday","stachethemes_event_calendar_lite")},{value:"5SA",label:__("5th Saturday","stachethemes_event_calendar_lite")},{value:"5SU",label:__("5th Sunday","stachethemes_event_calendar_lite")},{value:"-1MO",label:__("Last Monday","stachethemes_event_calendar_lite")},{value:"-1TU",label:__("Last Tuesday","stachethemes_event_calendar_lite")},{value:"-1WE",label:__("Last Wednesday","stachethemes_event_calendar_lite")},{value:"-1TH",label:__("Last Thursday","stachethemes_event_calendar_lite")},{value:"-1FR",label:__("Last Friday","stachethemes_event_calendar_lite")},{value:"-1SA",label:__("Last Saturday","stachethemes_event_calendar_lite")},{value:"-1SU",label:__("Last Sunday","stachethemes_event_calendar_lite")}],S=[{value:1,label:__("1st day","stachethemes_event_calendar_lite")},{value:2,label:__("2nd day","stachethemes_event_calendar_lite")},{value:3,label:__("3rd day","stachethemes_event_calendar_lite")},{value:4,label:__("4th day","stachethemes_event_calendar_lite")},{value:5,label:__("5th day","stachethemes_event_calendar_lite")},{value:6,label:__("6th day","stachethemes_event_calendar_lite")},{value:7,label:__("7th day","stachethemes_event_calendar_lite")},{value:8,label:__("8th day","stachethemes_event_calendar_lite")},{value:9,label:__("9th day","stachethemes_event_calendar_lite")},{value:10,label:__("10th day","stachethemes_event_calendar_lite")},{value:11,label:__("11th day","stachethemes_event_calendar_lite")},{value:12,label:__("12th day","stachethemes_event_calendar_lite")},{value:13,label:__("13th day","stachethemes_event_calendar_lite")},{value:14,label:__("14th day","stachethemes_event_calendar_lite")},{value:15,label:__("15th day","stachethemes_event_calendar_lite")},{value:16,label:__("16th day","stachethemes_event_calendar_lite")},{value:17,label:__("17th day","stachethemes_event_calendar_lite")},{value:18,label:__("18th day","stachethemes_event_calendar_lite")},{value:19,label:__("19th day","stachethemes_event_calendar_lite")},{value:20,label:__("20th day","stachethemes_event_calendar_lite")},{value:21,label:__("21st day","stachethemes_event_calendar_lite")},{value:22,label:__("22nd day","stachethemes_event_calendar_lite")},{value:23,label:__("23rd day","stachethemes_event_calendar_lite")},{value:24,label:__("24th day","stachethemes_event_calendar_lite")},{value:25,label:__("25th day","stachethemes_event_calendar_lite")},{value:26,label:__("26th day","stachethemes_event_calendar_lite")},{value:27,label:__("27th day","stachethemes_event_calendar_lite")},{value:28,label:__("28th day","stachethemes_event_calendar_lite")},{value:29,label:__("29th day","stachethemes_event_calendar_lite")},{value:30,label:__("30th day","stachethemes_event_calendar_lite")},{value:31,label:__("31th day","stachethemes_event_calendar_lite")}],w=[{value:1,label:__("Every year","stachethemes_event_calendar_lite")},{value:2,label:__("Every other year","stachethemes_event_calendar_lite")},{value:3,label:__("Every 3rd year","stachethemes_event_calendar_lite")},{value:4,label:__("Every 4th year","stachethemes_event_calendar_lite")},{value:5,label:__("Every 5th year","stachethemes_event_calendar_lite")},{value:6,label:__("Every 6th year","stachethemes_event_calendar_lite")},{value:7,label:__("Every 7th year","stachethemes_event_calendar_lite")},{value:8,label:__("Every 8th year","stachethemes_event_calendar_lite")},{value:9,label:__("Every 9th year","stachethemes_event_calendar_lite")},{value:10,label:__("Every 10th year","stachethemes_event_calendar_lite")}],A=[{value:1,label:__("January","stachethemes_event_calendar_lite")},{value:2,label:__("February","stachethemes_event_calendar_lite")},{value:3,label:__("March","stachethemes_event_calendar_lite")},{value:4,label:__("April","stachethemes_event_calendar_lite")},{value:5,label:__("May","stachethemes_event_calendar_lite")},{value:6,label:__("June","stachethemes_event_calendar_lite")},{value:7,label:__("July","stachethemes_event_calendar_lite")},{value:8,label:__("August","stachethemes_event_calendar_lite")},{value:9,label:__("September","stachethemes_event_calendar_lite")},{value:10,label:__("October","stachethemes_event_calendar_lite")},{value:11,label:__("November","stachethemes_event_calendar_lite")},{value:12,label:__("December","stachethemes_event_calendar_lite")}],k=e=>{const t={...e};let a="";switch(t.FREQ){case"daily":t.FREQ="DAILY";break;case"weekly":t.FREQ="WEEKLY";break;case"monthly-by-date":t.BYMONTHDAY||(t.BYMONTHDAY=""),t.FREQ="MONTHLY";break;case"monthly-by-day":t.FREQ="MONTHLY";break;case"yearly-by-date":t.BYMONTHDAY||(t.BYMONTHDAY=""),t.FREQ="YEARLY";break;case"yearly-by-day":t.FREQ="YEARLY"}return Object.keys(t).forEach((e=>{e&&(a+=`${e}=${t[e]};`)})),a},D=r?{}:(e=>{let t={};switch(e.split(";").forEach((e=>{if(e){const a=e.split("=");t[a[0]]=a[1]}})),t.FREQ){case"DAILY":t.FREQ="daily";break;case"WEEKLY":t.FREQ="weekly";break;case"MONTHLY":void 0!==t.BYMONTHDAY?t.FREQ="monthly-by-date":t.FREQ="monthly-by-day";break;case"YEARLY":void 0!==t.BYMONTHDAY?t.FREQ="yearly-by-date":t.FREQ="yearly-by-day"}return t})(a);return React.createElement(l.StecDiv,{className:"stec-rrule-generator"},React.createElement(u.default,{text:e}),React.createElement(o.default,{absoluteDropdown:y,value:r?"manual":D.FREQ?D.FREQ:"",options:f,onChange:e=>{if(""===e)c(""),v("");else if("manual"===e)v(""),c("manual");else{const t=k({FREQ:e,INTERVAL:1});v(t),c("")}}}),r||"daily"!==D.FREQ?"":React.createElement(React.Fragment,null,React.createElement(_.default,null),React.createElement(o.default,{absoluteDropdown:y,title:__("Daily Interval","stachethemes_event_calendar_lite"),value:D.INTERVAL?parseInt(D.INTERVAL,10):"",options:g,onChange:e=>{const t={...D,INTERVAL:e},a=k(t);v(a)}}),React.createElement(_.default,null)),r||"weekly"!==D.FREQ?"":React.createElement(React.Fragment,null,React.createElement(_.default,null),React.createElement(o.default,{absoluteDropdown:y,title:__("Weekly by day","stachethemes_event_calendar_lite"),multiple:!0,value:D.BYDAY?D.BYDAY.split(","):[],options:b,onChange:e=>{const t={...D,BYDAY:e},a=k(t);v(a)}}),React.createElement(_.default,null),React.createElement(o.default,{absoluteDropdown:y,title:__("Weekly interval","stachethemes_event_calendar_lite"),value:D.INTERVAL?parseInt(D.INTERVAL,10):"",options:R,onChange:e=>{const t={...D,INTERVAL:e},a=k(t);v(a)}}),React.createElement(_.default,null)),r||"monthly-by-day"!==D.FREQ?"monthly-by-date"===D.FREQ?React.createElement(React.Fragment,null,React.createElement(_.default,null),React.createElement(o.default,{absoluteDropdown:y,title:__("Monthly by date","stachethemes_event_calendar_lite"),multiple:!0,value:D.BYMONTHDAY?D.BYMONTHDAY.split(",").map((e=>parseInt(e,10))):[],options:S,onChange:e=>{const t={...D,BYMONTHDAY:e},a=k(t);v(a)}}),React.createElement(_.default,null),React.createElement(o.default,{absoluteDropdown:y,title:__("Monthly interval","stachethemes_event_calendar_lite"),value:D.INTERVAL?parseInt(D.INTERVAL,10):"",options:T,onChange:e=>{const t={...D,INTERVAL:e},a=k(t);v(a)}}),React.createElement(_.default,null)):"":React.createElement(React.Fragment,null,React.createElement(_.default,null),React.createElement(o.default,{absoluteDropdown:y,title:__("Monthly by day","stachethemes_event_calendar_lite"),multiple:!0,value:D.BYDAY?D.BYDAY.split(","):[],options:C,onChange:e=>{const t={...D,BYDAY:e},a=k(t);v(a)}}),React.createElement(_.default,null),React.createElement(o.default,{absoluteDropdown:y,title:__("Monthly interval","stachethemes_event_calendar_lite"),value:D.INTERVAL?parseInt(D.INTERVAL,10):"",options:T,onChange:e=>{const t={...D,INTERVAL:e},a=k(t);v(a)}}),React.createElement(_.default,null)),r||"yearly-by-day"!==D.FREQ?"yearly-by-date"===D.FREQ?React.createElement(React.Fragment,null,React.createElement(_.default,null),React.createElement(o.default,{absoluteDropdown:y,title:__("Yearly by date","stachethemes_event_calendar_lite"),multiple:!0,value:D.BYMONTHDAY?D.BYMONTHDAY.split(",").map((e=>parseInt(e,10))):[],options:S,onChange:e=>{const t={...D,BYMONTHDAY:e},a=k(t);v(a)}}),React.createElement(_.default,null),React.createElement(o.default,{absoluteDropdown:y,title:__("Yearly by month","stachethemes_event_calendar_lite"),multiple:!0,value:D.BYMONTH?D.BYMONTH.split(",").map((e=>parseInt(e,10))):[],options:A,onChange:e=>{const t={...D,BYMONTH:e},a=k(t);v(a)}}),React.createElement(_.default,null),React.createElement(o.default,{absoluteDropdown:y,title:__("Yearly interval","stachethemes_event_calendar_lite"),value:D.INTERVAL?parseInt(D.INTERVAL,10):"",options:w,onChange:e=>{const t={...D,INTERVAL:e},a=k(t);v(a)}}),React.createElement(_.default,null)):"":React.createElement(React.Fragment,null,React.createElement(_.default,null),React.createElement(o.default,{absoluteDropdown:y,title:__("Yearly by day","stachethemes_event_calendar_lite"),multiple:!0,value:D.BYDAY?D.BYDAY.split(","):[],options:C,onChange:e=>{const t={...D,BYDAY:e},a=k(t);v(a)}}),React.createElement(_.default,null),React.createElement(o.default,{absoluteDropdown:y,title:__("Yearly by month","stachethemes_event_calendar_lite"),multiple:!0,value:D.BYMONTH?D.BYMONTH.split(",").map((e=>parseInt(e,10))):[],options:A,onChange:e=>{const t={...D,BYMONTH:e},a=k(t);v(a)}}),React.createElement(_.default,null),React.createElement(o.default,{absoluteDropdown:y,title:__("Yearly interval","stachethemes_event_calendar_lite"),value:D.INTERVAL?parseInt(D.INTERVAL,10):"",options:w,onChange:e=>{const t={...D,INTERVAL:e},a=k(t);v(a)}}),React.createElement(_.default,null)),(()=>{if(r||!a)return"";return React.createElement(React.Fragment,null,React.createElement(_.default,null),React.createElement(d.default,{title:__("Repeat forever","stachethemes_event_calendar_lite"),value:void 0===D.UNTIL&&void 0===D.COUNT,onChange:()=>{const e={...D};delete e.COUNT,delete e.UNTIL;const t=k(e);v(t)}}),React.createElement(d.default,{title:__("Until","stachethemes_event_calendar_lite"),value:void 0!==D.UNTIL,onChange:()=>{const e={...D,UNTIL:""};delete e.COUNT;const t=k(e);v(t)}}),React.createElement(d.default,{title:__("Occurrence(s)","stachethemes_event_calendar_lite"),value:void 0!==D.COUNT,onChange:()=>{const e={...D,COUNT:""};delete e.UNTIL;const t=k(e);v(t)}}),(()=>{if(void 0===D.UNTIL)return"";const e=D.UNTIL.substr(0,4),t=D.UNTIL.substr(4,2),a=D.UNTIL.substr(6,2);return React.createElement(React.Fragment,null,React.createElement(_.default,null),React.createElement(s.default,{value:`${e}-${t}-${a}`,min:n,includeTime:!1,onChange:e=>{const t=moment(e).format("YYYYMMDD"),a={...D,UNTIL:t},l=k(a);v(l)}}))})(),void 0===D.COUNT?"":React.createElement(React.Fragment,null,React.createElement(_.default,null),React.createElement(m.default,{value:D.COUNT,placeholder:__("Number of occurrences","stachethemes_event_calendar_lite"),onChange:e=>{if(isNaN(e))return;const t={...D,COUNT:e},a=k(t);v(a)}})))})(),r||!a?"":React.createElement(React.Fragment,null,React.createElement(_.default,null),React.createElement(m.default,{readOnly:!0,title:__("RRULE"),value:a,description:__("Generated RRULE String","stachethemes_event_calendar_lite")})),r?React.createElement(React.Fragment,null,React.createElement(_.default,null),React.createElement(m.default,{title:__("RRULE"),value:a,placeholder:__("Enter your custom RRULE string","stachethemes_event_calendar_lite"),description:__("The recurrence rule (RRULE) is used in computing the recurrence set.","stachethemes_event_calendar_lite"),onChange:e=>{v(e)}})):"",React.createElement(h,{value:E,display:!(!r&&!D.FREQ),onExdateChange:p}),!D.FREQ&&!r&&React.createElement(i.default,{text:t}))}},79226:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var l=a(8403),n=a(26878);const r=React.forwardRef(((e,t)=>{const a=["stec-section-collapse-content"],[r,c]=(0,n.useState)(!!e.collapsed&&e.collapsed),s=()=>{const t=!r;c(t),"function"==typeof e.onToggle&&e.onToggle(t)};return r&&a.push("collapsed"),React.createElement(l.StecDiv,{className:a.join(" "),ref:t},React.createElement(l.StecDiv,{className:"stec-section-collapse-top"},e.title&&React.createElement(l.StecSpan,{key:"title",className:"stec-section-collapse-title",onClick:s},e.title),r?React.createElement("i",{className:"fas fa-plus",onClick:s}):React.createElement("i",{className:"fas fa-minus",onClick:s}),e.onRemove&&React.createElement("i",{className:"fas fa-trash",onClick:e.onRemove})),e.subtitle&&React.createElement(l.StecSpan,{key:"subittle",className:"stec-section-collapse-subtitle",onClick:s},e.subtitle),React.createElement(l.StecDiv,{className:"stec-section-collapse-inner"},e.children))}));r.displayName="SectionCollapseContent";const c=r},54342:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var l=a(8403),n=a(73772),r=a(26960),c=a(26878),s=a(32488);const __=n.__;const i=function(e){const[t,a]=(0,c.useState)(""),n=(e=>{if(!t)return e;const a=[];let l=t.split(" ").filter((e=>e));return l=l.filter(((e,t)=>l.indexOf(e)===t)),e.forEach((e=>{if(!1===Array.isArray(e.keywords))return;const t=e.keywords.filter((e=>{const t=e.trim().toLowerCase();return l.includes(t)})).length;t/l.length*100>=95&&a.push({item:e,matchedKeywordCount:t})})),a.sort(((e,t)=>t.matchedKeywordCount-e.matchedKeywordCount)),a.map((e=>e.item))})(e.items);return React.createElement(l.StecDiv,{className:"stec-side-navigation"},React.createElement(s.UncontrolledDelayedInputText,{minLength:0,placeholder:__("Search option or feature","stachethemes_event_calendar_lite"),defaultValue:t,onChange:e=>{a(e)},delay:200}),n.map((t=>{const a=["stec-side-navigation-item"];return!0===t.active&&a.push("active"),React.createElement(l.StecSpan,{key:t.id,className:a.join(" "),onClick:()=>{(t=>{const a=(0,r.cloneDeep)(e.items);a.forEach((e=>{e.active=e.id===t})),e.setItems(a)})(t.id)}},React.createElement("i",{className:t.icon}),React.createElement(l.StecSpan,null,t.label))})))}},7517:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var l=a(58168),n=a(39393),r=a(6405),c=a(8403),s=a(23905),i=a(73772),u=a(26878),d=(a(60799),a(75761)),o=a(78565),m=a(13839);const _x=i._x;function _(e){return React.createElement(c.StecDiv,{className:"stec-text-editor"},React.createElement("label",null,React.createElement(n.UncontrolledInputTextarea,{title:e.title,defaultValue:e.value,onChange:t=>{e.onChange(t)},description:e.description})))}const h=e=>{const[t,a]=(0,u.useState)(e.value),l=e.onChange,n=(0,r.getPluginUrl)("assets/js/libs/tinymce/js/tinymce/tinymce.min.js").href;let i=STEC_VARIABLES.tiny_mce.src,_=!1;"cdn"===i?i=void 0:i?_=!0:i=n;const h=e=>{void 0!==window.wp.media&&STEC_VARIABLES?.current_user?.capability?.upload_files&&e?.ui?.registry?.addButton("mediaLibrary",{text:_x("Media Library","TinyMCE Button","stachethemes_event_calendar_lite"),tooltip:_x("Add images from the media library","TinyMCE Button","stachethemes_event_calendar_lite"),onAction:function(t){(async e=>{const t=await(0,r.MediaFrame)({title:_x("Select Images","TinyMCE Editor Media Library","stachethemes_event_calendar_lite"),buttonText:_x("Add Images","TinyMCE Editor Media Library","stachethemes_event_calendar_lite"),libraryType:"image",multiple:!0});Array.isArray(t)&&t.length>0&&t.forEach((t=>{const a=`<img src="${t.url}" alt="${t.alt}" />`;e.insertContent(a)}))})(e)}})};let v={setup:e=>{h(e),"function"==typeof window.stecOnTinyMceSetup&&window.stecOnTinyMceSetup(e)},relative_urls:!1,convert_urls:!1,menubar:!1,plugins:_?["link","lists","image"]:["link","lists","image","wordcount","code"],toolbar:"undo redo | formatselect | blocks fontsize | bold italic link | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | mediaLibrary image | removeformat | wordcount | code"};return"function"==typeof window.stecFilterTinyMceParams&&(v=window.stecFilterTinyMceParams(v)),(0,u.useEffect)((()=>{l(t)}),[t,l]),React.createElement(c.StecDiv,{className:"stec-text-editor"},React.createElement("label",null,React.createElement(m.default,{style:{justifyContent:"space-between"}},React.createElement(o.default,{text:e.title})),React.createElement(s.Editor,{onScriptsLoadError:()=>{e?.onScriptsLoadError?.()},tinymceScriptSrc:i,apiKey:STEC_VARIABLES.tiny_mce.api_key,value:t,onEditorChange:e=>{a(e)},init:v}),React.createElement(d.default,{text:e.description,allowHtml:!0})))};const v=function(e){const[t,a]=(0,u.useState)(0);return window.STEC_FORCE_DISABLE?.tiny_mce?React.createElement(_,e):!0===STEC_VARIABLES.tiny_mce.enabled?React.createElement(h,(0,l.default)({},e,{onScriptsLoadError:()=>{window.STEC_FORCE_DISABLE||(window.STEC_FORCE_DISABLE={}),window.STEC_FORCE_DISABLE.tiny_mce=!0,a(t+1)}})):React.createElement(_,e)}},13734:(e,t,a)=>{a.r(t),a.d(t,{UpsertForm:()=>T,default:()=>C});var l=a(52779),n=a(93699),r=a(62552),c=a(32779),s=a(32488),i=a(79051),u=a(48596),d=a(22819),o=a(98196),m=a(91927),_=a(81148),h=a(6405),v=a(13328),p=a(8403),E=a(73772),y=a(26960),f=a(26878),g=a(60799),R=a(73075);const __=E.__,b=e=>{const{wasSubmitted:t,focusFieldsRef:a,postData:l}=e,{items:n,ready:r,error:s}=(0,v.usePermissions)();return!r||s?null:React.createElement(React.Fragment,null,React.createElement(v.WithMaybeDisplayPermissions,{type:"edit_permission"},React.createElement(d.default,null),React.createElement(c.UncontrolledInputSelect,{ref:e=>a.current.edit_permission=e,multiple:!0,title:__("Edit permission","stachethemes_event_calendar_lite"),options:n.filter((e=>"stec_public"!==e.value)),defaultValue:l.current.meta.edit_permission,description:__("Who can edit this category","stachethemes_event_calendar_lite"),required:!0,errorMessage:__("The edit permission cannot be empty","stachethemes_event_calendar_lite"),wasSubmitted:t,onChange:e=>{l.current.meta.edit_permission=e}})),React.createElement(v.WithMaybeDisplayPermissions,{type:"use_permission"},React.createElement(d.default,null),React.createElement(c.UncontrolledInputSelect,{ref:e=>a.current.use_permission=e,multiple:!0,title:__("Use permission","stachethemes_event_calendar_lite"),options:n.filter((e=>"publish"!==e.value)),defaultValue:l.current.meta.use_permission,description:__("Who can submit events to this category","stachethemes_event_calendar_lite"),required:!0,errorMessage:__("The use permission cannot be empty","stachethemes_event_calendar_lite"),wasSubmitted:t,onChange:e=>{l.current.meta.use_permission=e}})))};function T(e){const[t,a]=(0,f.useState)(!1),[c,m]=(0,f.useState)(0),v=(0,f.useRef)(!1),p=R.default,E=(0,f.useRef)((0,y.cloneDeep)(e.template?e.template:p)),T=(0,f.useRef)([]),C=(e,t=!0)=>{E.current=t?(0,y.cloneDeep)(e):e,m((0,y.uniqueId)())},S=E.current.id?[React.createElement("i",{key:"icon",className:"fa-solid fa-pen-to-square"}),__("Edit category","stachethemes_event_calendar_lite")]:[React.createElement("i",{key:"icon",className:"fa-solid fa-plus"}),__("Add new category","stachethemes_event_calendar_lite")];return React.createElement(u.default,{title:S,key:c},React.createElement(_.default,{postData:E}),React.createElement(d.default,null),React.createElement(s.UncontrolledInputText,{ref:e=>T.current.name=e,title:__("Name"),defaultValue:E.current.name,placeholder:__("Category name","stachethemes_event_calendar_lite"),description:__("Category display name"),required:!0,regex:(0,h.getRegexByType)("title"),errorMessage:__("The category must have a name","stachethemes_event_calendar_lite"),wasSubmitted:t,onChange:e=>{E.current.name=e}}),React.createElement(d.default,null),React.createElement(s.UncontrolledInputText,{ref:e=>T.current.slug=e,title:__("Slug"),defaultValue:E.current.slug,placeholder:__("Category slug","stachethemes_event_calendar_lite"),description:__("Leave empty to auto-generate"),required:!1,regex:(0,h.getRegexByType)("slug"),errorMessage:__("The category must have a valid slug","stachethemes_event_calendar_lite"),onChange:e=>{E.current.slug=e},wasSubmitted:t}),React.createElement(d.default,null),React.createElement(r.UncontrolledInputColor,{title:__("Color","stachethemes_event_calendar_lite"),defaultValue:E.current.meta.color,description:__("Category color","stachethemes_event_calendar_lite"),onChange:e=>{E.current.meta.color=e}}),React.createElement(d.default,null),React.createElement(i.UncontrolledInputThumbType,{title:__("Thumbnail type","stachethemes_event_calendar_lite"),defaultValue:E.current.meta.thumbnail,description:__("Thumbnail type for your events. Events can override this value","stachethemes_event_calendar_lite"),onChange:e=>{E.current.meta.thumbnail=e}}),React.createElement(d.default,null),React.createElement(b,{postData:E,focusFieldsRef:T,wasSubmitted:t}),React.createElement(d.default,null),React.createElement(l.default,{label:E.current.id?__("Update","stachethemes_event_calendar_lite"):__("Create","stachethemes_event_calendar_lite",0),className:"green",onClick:()=>{if(!0!==v.current){if(a(!0),!1===(()=>{const e=[{id:"name",regex:(0,h.getRegexByType)("title"),meta:!1,errorMessage:__("The category must have a name","stachethemes_event_calendar_lite")},{id:"slug",regex:(0,h.getRegexByType)("slug"),meta:!1,errorMessage:__("The category must have a valid slug","stachethemes_event_calendar_lite")},{id:"use_permission",meta:!0,errorMessage:__("The use permission cannot be empty","stachethemes_event_calendar_lite")},{id:"edit_permission",meta:!0,errorMessage:__("The edit permission cannot be empty","stachethemes_event_calendar_lite")}];for(let t in e){const a=e[t],l=a.meta?E.current.meta[a.id]:E.current[a.id];let n=!0;if(n=a.regex?new RegExp(a.regex).test(l):Array.isArray(l)?l.length>0:!(!l||""===l),!1===n)return T.current[a.id]&&T.current[a.id].focus(),g.toast.error(a.errorMessage),!1}return!0})())return!1;g.toast.promise(new Promise(((t,a)=>{v.current=!0,async function(){try{let a;a=E.current.id?await(0,o.newApiPut)({route:"CATEGORIES",args:E.current.id,data:E.current,includeResponseStatus:!0,errorMessage:"auto"}):await(0,o.newApiPost)({route:"CATEGORIES",data:E.current,includeResponseStatus:!0,translateErrorCode:{term_exists:__("A category with this name already exists","stachethemes_event_calendar_lite")},errorMessage:"auto"});const{status:l,data:n}=a;switch(l){case 201:return e.onCategoryInserted&&e.onCategoryInserted(n),C(n),(0,o.flushApiCache)({group:"taxonomy-stec_cat"}),t(__("Created","stachethemes_event_calendar_lite"));case 200:return e.onCategoryInserted&&e.onCategoryInserted(n),C(n),(0,o.flushApiCache)({group:"taxonomy-stec_cat"}),t(__("Updated","stachethemes_event_calendar_lite"))}}catch(e){return a(e.message)}}()})),{loading:__("Saving","stachethemes_event_calendar_lite"),success:e=>(v.current=!1,e),error:e=>(v.current=!1,e)})}else(0,g.toast)(__("Another action is in progress","stachethemes_event_calendar_lite"))}}),React.createElement(l.default,{label:__("Reset form","stachethemes_event_calendar_lite"),className:"yellow",style:{marginLeft:5},onClick:()=>{C(p),a(!1),(0,g.toast)(__("The form has been reset","stachethemes_event_calendar_lite"))}}),E.current.id&&React.createElement(n.default,{label:__("Delete","stachethemes_event_calendar_lite"),className:"red",style:{marginLeft:5},onClick:()=>{!0!==v.current?g.toast.promise(new Promise(((t,a)=>{v.current=!0,async function(){try{await(0,o.newApiDelete)({route:"CATEGORIES",args:E.current.id});e.onCategoryDeleted&&e.onCategoryDeleted(E.current);const a=(0,y.cloneDeep)(E.current);return a.id="",C(a,!1),(0,o.flushApiCache)({group:"taxonomy-stec_cat"}),t(__("Deleted","stachethemes_event_calendar_lite"))}catch(e){return a(e.message)}}()})),{loading:__("Deleting","stachethemes_event_calendar_lite"),success:e=>(v.current=!1,e),error:e=>(v.current=!1,e)}):(0,g.toast)(__("Another action is in progress","stachethemes_event_calendar_lite"))}}),React.createElement(l.default,{label:__("Back","stachethemes_event_calendar_lite"),className:"blue",style:{marginLeft:5},onClick:()=>{const t=!E.current.id;e.onBack(t)}}))}const C=function(){const{setActiveMenu:e,activeMenuParams:t}=(0,m.useDashboardMenu)(),a=a=>{let l=t.manageListQueryArgs||null;a&&(l=null),e({page:"categories-list",params:{initialQueryArgs:l}})};return React.createElement(React.Fragment,null,React.createElement(p.StecDiv,{className:"stec-dashboard-top-nav"},React.createElement(l.default,{className:"stcolor stec-dashboard-home-button",label:[React.createElement("i",{key:"icon",className:"fa-solid fa-home"}),__("Home","stachethemes_event_calendar_lite")],onClick:()=>{e({page:"home",params:{}})}}),React.createElement(l.default,{className:"blue",label:[React.createElement("i",{key:"icon",className:"fa-solid fa-list"}),__("Manage categories","stachethemes_event_calendar_lite")],onClick:a})),React.createElement(T,{template:t.template||!1,onBack:e=>{a(e)}}))}},73075:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});const l=void 0!==window.STEC_CATEGORY_TEMPLATE?window.STEC_CATEGORY_TEMPLATE:{name:"",slug:"",status:"publish",meta:{author:"",color:"#A7C7E7",thumbnail:{type:"icon",icon:"",image:[]},read_permission:["stec_public"],use_permission:["stec_private"],edit_permission:["stec_private"]}}},56675:(e,t,a)=>{a.r(t),a.d(t,{default:()=>D});var l=a(52779),n=a(93699),r=a(94508),c=a(54342),s=a(22819),i=a(98196),u=a(91927),d=a(6405),o=a(8403),m=a(73772),_=a(26960),h=a(26878),v=a(60799),p=a(47502),E=a(49997),y=a(64623),f=a(1530),g=a(64059),R=a(84260),b=a(80897),T=a(90408),C=a(50942),S=a(26812),w=a(59006);const __=m.__,A=e=>{switch(e.id){case"general":return React.createElement(y.default,e);case"introduction":return React.createElement(g.default,e);case"schedule":return React.createElement(C.default,e);case"location":return React.createElement(R.default,e);case"organizers":return React.createElement(b.default,e);case"guests":return React.createElement(f.default,e);case"attachments":return React.createElement(E.default,e);case"public-health":return React.createElement(T.default,e);case"about":return React.createElement(p.default,e);default:return""}},k=e=>{const t=(0,_.cloneDeep)(S.default),[a,l]=(0,h.useState)(t),n=a.filter((e=>!0===e.active))[0].id;return React.createElement(o.StecDiv,{className:"stec-dashboard-upsert-event-wrapper"},React.createElement(c.default,{items:a,setItems:l}),React.createElement(o.StecDiv,{className:"stec-dashboard-upsert-event-component-container"},React.createElement(A,{id:n,wasSubmitted:e.wasSubmitted,postData:e.postData,focusFieldsRef:e.focusFieldsRef,onCalendarChange:e.onCalendarChange}),React.createElement(s.default,null),e.formButtons()))};const D=function(){const e=(0,h.useRef)(!1),{activeMenuParams:t,setActiveMenu:a}=(0,u.useDashboardMenu)(),c=w.default,s=(0,h.useRef)((0,_.cloneDeep)(t.template?t.template:c)),[m,p]=(0,h.useState)(s?.current?.stec_cal[0]),E=(0,h.useRef)([]),[y,f]=(0,h.useState)(0),[g,R]=(0,h.useState)(!1),b=()=>{let e=t.manageListQueryArgs||null;s.current.id||(e=null),a({page:t.isArchivePage?"events-archive":"events-list",params:{initialQueryArgs:e}})},T=()=>{!0!==e.current?v.default.promise(new Promise(((t,a)=>{e.current=!0,async function(){try{await(0,i.newApiDelete)({route:"EVENTS",args:s.current.id,errorMessage:"auto"});const e=(0,_.cloneDeep)(s.current);return delete e.id,C(e,!1),t(__("Deleted","stachethemes_event_calendar_lite"))}catch(e){return a(e.message)}}()})),{loading:__("Deleting","stachethemes_event_calendar_lite"),success:t=>(e.current=!1,t),error:t=>(e.current=!1,t)}):(0,v.default)(__("Another action is in progress","stachethemes_event_calendar_lite"))},C=(e,t=!0)=>{s.current=t?(0,_.cloneDeep)(e):e,f((0,_.uniqueId)())},S=()=>{if(!0!==e.current){if(R(!0),!1===(()=>{const e=[{id:"title",regex:(0,d.getRegexByType)("title"),meta:!1,errorMessage:__("The event must have a title","stachethemes_event_calendar_lite")},{id:"slug",regex:(0,d.getRegexByType)("slug"),meta:!1,errorMessage:__("The event must have a valid slug","stachethemes_event_calendar_lite")},{id:"stec_cal",meta:!1,errorMessage:__("The event must have a calendar","stachethemes_event_calendar_lite")},{id:"start_date",regex:(0,d.getRegexByType)("start_date"),meta:!0,errorMessage:__("Event must have a start date","stachethemes_event_calendar_lite")},{id:"end_date",regex:(0,d.getRegexByType)("end_date"),meta:!0,errorMessage:__("Event must have an end date","stachethemes_event_calendar_lite")},{id:"timezone",meta:!0,errorMessage:__("The event must have a timezone","stachethemes_event_calendar_lite")},{id:"read_permission",meta:!0,errorMessage:__("The read permission cannot be empty","stachethemes_event_calendar_lite")},{id:"edit_permission",meta:!0,errorMessage:__("The edit permission cannot be empty","stachethemes_event_calendar_lite")}];for(let t in e){const a=e[t];let l=a.meta?s.current.meta[a.id]:s.current[a.id];"title"===a.id&&(l=l.raw);let n=!0;if(n=a.regex?new RegExp(a.regex).test(l):Array.isArray(l)?l.length>0:!(!l||""===l),!1===n)return E.current[a.id]&&E.current[a.id].focus(),v.default.error(a.errorMessage),!1}return moment(s.current.meta.start_date).isAfter(s.current.meta.end_date)?(E.current.start_date&&E.current.start_date.focus(),v.default.error(__("Start date must be before end date","stachethemes_event_calendar_lite")),!1):(s.current.comment_status||(s.current.comment_status="closed"),!0)})())return!1;v.default.promise(new Promise(((t,a)=>{e.current=!0,async function(){try{let e,l=(0,_.cloneDeep)(s.current);e=l.id?await(0,i.newApiPut)({route:"EVENTS",args:l.id,data:l,includeResponseStatus:!0,errorMessage:"auto"}):await(0,i.newApiPost)({route:"EVENTS",data:l,includeResponseStatus:!0,errorMessage:"auto"});const{status:n,data:r}=e;switch(n){case 201:return C(r),t(__("Created","stachethemes_event_calendar_lite"));case 200:return C(r),t(__("Updated","stachethemes_event_calendar_lite"));default:return a(__("Sorry, something went wrong","stachethemes_event_calendar_lite"))}}catch(e){return a(e.message)}}()})),{loading:__("Saving","stachethemes_event_calendar_lite"),success:t=>(e.current=!1,t),error:t=>(e.current=!1,t)})}else(0,v.default)(__("Another action is in progress","stachethemes_event_calendar_lite"))},A=()=>{C(c),R(!1),(0,v.default)(__("The form has been reset","stachethemes_event_calendar_lite"))},D=s.current.id||!1,I=(0,d.canModerateCalendar)(m);return React.createElement(React.Fragment,null,React.createElement(o.StecDiv,{className:"stec-dashboard-top-nav"},React.createElement(l.default,{className:"stcolor stec-dashboard-home-button",label:[React.createElement("i",{key:"icon",className:"fa-solid fa-house"}),__("Home","stachethemes_event_calendar_lite")],onClick:()=>{a({page:"home",params:{}})}}),React.createElement(l.default,{className:"blue",label:[React.createElement("i",{key:"icon",className:"fa-solid fa-list"}),__("Manage events","stachethemes_event_calendar_lite")],onClick:b})),React.createElement(r.default,{label:D?[React.createElement("i",{key:"icon",className:"fa-solid fa-pen-to-square"}),__("Edit event","stachethemes_event_calendar_lite")]:[React.createElement("i",{key:"icon",className:"fa-solid fa-plus"}),__("Add new event","stachethemes_event_calendar_lite")]}),React.createElement(k,{key:y,wasSubmitted:g,postData:s,focusFieldsRef:E,onCalendarChange:e=>{p(e)},formButtons:()=>React.createElement(React.Fragment,null,React.createElement(l.default,{style:{marginRight:5},label:D?I&&0===s.current.meta.approved?__("Approve","stachethemes_event_calendar_lite"):__("Update","stachethemes_event_calendar_lite",0):__("Create","stachethemes_event_calendar_lite",1),className:"green",onClick:S}),React.createElement(l.default,{label:__("Reset form","stachethemes_event_calendar_lite"),className:"yellow",style:{marginRight:5},onClick:A}),s.current.id&&React.createElement(n.default,{label:__("Delete","stachethemes_event_calendar_lite"),className:"red",style:{marginRight:5},onClick:T}),React.createElement(l.default,{label:__("Back","stachethemes_event_calendar_lite"),className:"blue",onClick:b}))}))}},47502:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var l=a(32488),n=a(39393),r=a(48596),c=a(22819),s=a(81148),i=a(73772);const __=i.__,u=e=>{const t=e.postData;return React.createElement(r.default,{title:__("About","stachethemes_event_calendar_lite")},t.current.meta.anonymous&&React.createElement(React.Fragment,null,React.createElement(l.UncontrolledInputText,{title:__("Submitted by anonymous user","stachethemes_event_calendar_lite"),readOnly:!0,defaultValue:__("Yes","stachethemes_event_calendar_lite"),description:__("This event was submitted by anonymous user","stachethemes_event_calendar_lite")}),React.createElement(c.default,null)),""!==t.current.meta.contact_name&&React.createElement(React.Fragment,null,React.createElement(l.UncontrolledInputText,{title:__("Contact name","stachethemes_event_calendar_lite"),readOnly:!0,defaultValue:t.current.meta.contact_name,description:__("Name for contact","stachethemes_event_calendar_lite")}),React.createElement(c.default,null)),""!==t.current.meta.contact_phone&&React.createElement(React.Fragment,null,React.createElement(l.UncontrolledInputText,{title:__("Contact phone","stachethemes_event_calendar_lite"),readOnly:!0,defaultValue:t.current.meta.contact_phone,description:__("Phone for contact","stachethemes_event_calendar_lite")}),React.createElement(c.default,null)),""!==t.current.meta.contact_email&&React.createElement(React.Fragment,null,React.createElement(l.UncontrolledInputText,{title:__("Contact email","stachethemes_event_calendar_lite"),readOnly:!0,defaultValue:t.current.meta.contact_email,description:__("Email for contact","stachethemes_event_calendar_lite")}),React.createElement(c.default,null)),React.createElement(s.default,{postData:t}),React.createElement(c.default,null),React.createElement(l.UncontrolledInputText,{title:__("Created on","stachethemes_event_calendar_lite"),readOnly:!0,defaultValue:t.current.date,description:__("The date on which the event was created","stachethemes_event_calendar_lite")}),React.createElement(c.default,null),React.createElement(n.UncontrolledInputTextarea,{title:__("Author notes","stachethemes_event_calendar_lite"),defaultValue:t.current.meta.author_notes,onChange:e=>{t.current.meta.author_notes=e},description:__("Any notes you want to leave for the author","stachethemes_event_calendar_lite")}))},d=e=>{const t=e.postData;return!!t.current.id?React.createElement(u,e):React.createElement(r.default,{title:__("About the Event","stachethemes_event_calendar_lite")},React.createElement(n.UncontrolledInputTextarea,{title:__("Author notes","stachethemes_event_calendar_lite"),defaultValue:t.current.meta.author_notes,onChange:e=>{t.current.meta.author_notes=e},description:__("Any notes you want to left for the author","stachethemes_event_calendar_lite")}))}},49997:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var l=a(52779),n=a(48596),r=a(6405),c=a(8403),s=a(73772),i=a(26960),u=a(26878);const __=s.__,d=React.forwardRef(((e,t)=>{const a=e.item;return React.createElement(c.StecDiv,{key:a.id,className:"stec-dashboard-event-upsert-attachment"},React.createElement(c.StecSpan,{className:"stec-dashboard-event-upsert-attachment-url"},a.url),React.createElement(c.StecSpan,{className:"stec-dashboard-event-upsert-attachment-remove",onClick:()=>{t.current.meta.attachments=t.current.meta.attachments.filter((e=>e.id!==a.id)),e.onRequestNewInstance()}},React.createElement("i",{className:"fa-solid fa-trash"})))}));d.displayName="AttachmentItem";const o=React.forwardRef(((e,t)=>React.createElement(c.StecDiv,{className:"stec-dashboard-event-upsert-attachment-list"},t.current.meta.attachments.map(((a,l)=>React.createElement(d,{key:a.id,item:a,ref:t,onRequestNewInstance:e.onRequestNewInstance}))))));o.displayName="AttachmentsContent";const m=e=>{const t=e.postData,[a,c]=(0,u.useState)(0),s=()=>{c((0,i.uniqueId)())};return React.createElement(n.default,{title:__("Attachments","stachethemes_event_calendar_lite")},React.createElement(o,{key:a,ref:t,onRequestNewInstance:s}),React.createElement(l.default,{disabled:void 0===window.wp.media||!STEC_VARIABLES?.current_user?.capability?.upload_files,className:"blue",label:__("Add Attachments","stachethemes_event_calendar_lite"),onClick:async()=>{if(void 0===window.wp.media||!STEC_VARIABLES?.current_user?.capability?.upload_files)return;const e=await(0,r.MediaFrame)({title:__("Attachments","stachethemes_event_calendar_lite"),buttonText:__("Add attachments","stachethemes_event_calendar_lite"),libraryType:"",multiple:!0}),a=[...t.current.meta.attachments];e&&Array.isArray(e)&&e.forEach((e=>{const t={id:e.id,url:e.url,caption:e.caption};a.some((t=>t.id===e.id))||a.push(t)})),t.current.meta.attachments=a,s()}}))}},64623:(e,t,a)=>{a.r(t),a.d(t,{default:()=>M});var l=a(52779),n=a(85873),r=a(85262),c=a(62552),s=a(32779),i=a(32488),u=a(79051),d=a(41426),o=a(13839),m=a(12222),_=a(48596),h=a(22819),v=a(98196),p=a(26653),E=a(13734),y=a(6405),f=a(13328),g=a(32465),R=a(73772),b=a(26960),T=a(26878),C=a.n(T);const __=R.__,S=e=>{const{postData:t}=e,[a,l]=(0,T.useState)(t.current.meta.recurrence_id);return(0,T.useEffect)((()=>{t.current.meta.recurrence_id!==a&&(t.current.meta.recurrence_id=a)}),[a,t]),t.current.meta.recurrence_id?C().createElement(C().Fragment,null,C().createElement(n.DatePicker,{title:__("Recurrence override date","stachethemes_event_calendar_lite"),description:__("Select recurrence override date.","stachethemes_event_calendar_lite"),value:moment(a).format("YYYY-MM-DD"),includeTime:!1,onChange:e=>{l(moment(e).format("YYYYMMDD"))},required:!0}),C().createElement(h.default,null)):null},w=e=>{const{wasSubmitted:t,focusFieldsRef:a,postData:l}=e,{items:n,ready:r,error:c}=(0,f.usePermissions)();return!r||c?null:C().createElement(C().Fragment,null,C().createElement(f.WithMaybeDisplayPermissions,{type:"read_permission"},C().createElement(h.default,null),C().createElement(s.UncontrolledInputSelect,{ref:e=>a.current.read_permission=e,multiple:!0,defaultValue:l.current.meta.read_permission,title:__("Read permission","stachethemes_event_calendar_lite"),options:n.filter((e=>e)),onChange:e=>{l.current.meta.read_permission=e},description:__("Who can view this event","stachethemes_event_calendar_lite"),required:!0,wasSubmitted:t,errorMessage:__("The read permission cannot be empty","stachethemes_event_calendar_lite")})),C().createElement(f.WithMaybeDisplayPermissions,{type:"edit_permission"},C().createElement(h.default,null),C().createElement(s.UncontrolledInputSelect,{ref:e=>a.current.edit_permission=e,multiple:!0,defaultValue:l.current.meta.edit_permission,title:__("Edit permission","stachethemes_event_calendar_lite"),options:n.filter((e=>"stec_public"!==e.value)),onChange:e=>{l.current.meta.edit_permission=e},description:__("Who can edit this event","stachethemes_event_calendar_lite"),required:!0,wasSubmitted:t,errorMessage:__("The edit permission cannot be empty","stachethemes_event_calendar_lite")})))},A=({postData:e,focusFieldsRef:t,wasSubmitted:a})=>{const{items:l,ready:n,error:r}=(0,f.useTaxonomyItemsAll)({perPage:100,permissionType:"use_permission",taxonomy:"stec_cat"});return C().createElement(C().Fragment,{key:"SelectCategoriesList"},n&&!r&&C().createElement(s.UncontrolledInputSelect,{title:__("Categories","stachethemes_event_calendar_lite"),multiple:!0,defaultValue:e.current.stec_cat,options:l.map((e=>({value:e.id,label:e.name,color:e.meta.color}))),description:__("Assign event categories","stachethemes_event_calendar_lite"),required:!0,onChange:t=>{e.current.stec_cat=t}}),C().createElement(h.default,null))},k=({postData:e,focusFieldsRef:t,wasSubmitted:a})=>{const[n,r]=(0,T.useState)(0),[c,s]=(0,T.useState)(!1),i=()=>{(0,v.flushApiCache)({group:"taxonomy-stec_cat"}),r((0,b.uniqueId)())};return C().createElement(C().Fragment,{key:"SelectCategories"},C().createElement(d.default,{isOpen:c,onClose:()=>{s(!1)}},C().createElement(E.UpsertForm,{template:!1,onBack:()=>{s(!1)},onCategoryInserted:t=>{!1===Array.isArray(e.current.stec_cat)&&(e.current.stec_cat=[]),!1===e.current.stec_cat.some((e=>t.id===e))&&(e.current.stec_cat=[...e.current.stec_cat,t.id]),i()},onCategoryDeleted:t=>{!1===Array.isArray(e.current.stec_cat)&&(e.current.stec_cat=[]),e.current.stec_cat=e.current.stec_cat.filter((e=>e!==t.id)),i()}})),C().createElement(A,{key:n,postData:e,focusFieldsRef:t,wasSubmitted:a}),C().createElement(l.default,{disabled:!STEC_VARIABLES.current_user.capability.manage_categories,className:"blue",label:[C().createElement("i",{key:"icon",className:"fa-solid fa-plus"}),__("Add new category","stachethemes_event_calendar_lite")],onClick:()=>{if(!STEC_VARIABLES.current_user.capability.manage_categories)return!1;s(!0)}}))},D=({postData:e,focusFieldsRef:t,wasSubmitted:a,onCalendarChange:l})=>{const{items:n,ready:r,error:c}=(0,f.useTaxonomyItemsAll)({perPage:100,permissionType:"use_permission",taxonomy:"stec_cal"});return C().createElement(C().Fragment,{key:"SelectCalendarList"},r&&!c&&C().createElement(s.UncontrolledInputSelect,{ref:e=>t.current.stec_cal=e,title:__("Select calendar","stachethemes_event_calendar_lite"),defaultValue:e.current.stec_cal,options:n.map((e=>({value:e.id,label:e.name}))),description:__("Assign the event to the selected calendar","stachethemes_event_calendar_lite"),required:!0,onChange:t=>{if(e.current.stec_cal=t,Array.isArray(n)){const a=n.find((e=>t===e.id));a&&(e.current.meta.thumbnail=a.meta.thumbnail,e.current.meta.color=a.meta.color)}l&&l(e.current.stec_cal,n)},errorMessage:__("The event must have a calendar","stachethemes_event_calendar_lite"),wasSubmitted:a}),C().createElement(h.default,null))},I=({postData:e,focusFieldsRef:t,wasSubmitted:a,onCalendarChange:n})=>{const[r,c]=(0,T.useState)(0),[s,i]=(0,T.useState)(!1),u=()=>{(0,v.flushApiCache)({group:"taxonomy-stec_cal"}),c((0,b.uniqueId)())};return C().createElement(C().Fragment,{key:"SelectCalendar"},C().createElement(d.default,{isOpen:s,onClose:()=>{i(!1)}},C().createElement(p.UpsertForm,{template:!1,onBack:()=>{i(!1)},onCalendarInserted:t=>{e.current.stec_cal=t.id,u()},onCalendarDeleted:t=>{e.current.stec_cal="",u()}})),C().createElement(D,{key:r,postData:e,focusFieldsRef:t,wasSubmitted:a,onCalendarChange:n}),C().createElement(h.default,null),C().createElement(l.default,{disabled:!STEC_VARIABLES.current_user.capability.manage_calendars,className:"blue",label:[C().createElement("i",{key:"icon",className:"fa-solid fa-plus"}),__("Add new calendar","stachethemes_event_calendar_lite")],onClick:()=>{if(!STEC_VARIABLES.current_user.capability.manage_calendars)return!1;i(!0)}}))},x=e=>{const t=e.postData,a=e.wasSubmitted,[l,c]=(0,T.useState)(t.current.meta.start_date),[s,i]=(0,T.useState)(t.current.meta.end_date),[u,d]=(0,T.useState)(t.current.meta.all_day),[o,_]=(0,T.useState)(t.current.meta.hide_end),[v,p]=(0,T.useState)(t.current.meta.exdate),[E,y]=(0,T.useState)(t.current.meta.rrule),[f,g]=(0,T.useState)(t.current.meta.manual_rrule),R=moment(l),b=moment(s),w=u?"YYYY-MM-DD":"YYYY-MM-DD\\THH:mm",A=R.format(w),k=b.format(w),D=!(t.current.meta.recurrence_id&&!t.current.meta.manual_rrule);return(0,T.useEffect)((()=>{e.onChange({startDate:l,endDate:s,allDay:u,hideEnd:o,rrule:E,manualRrule:f,exdate:v})}),[l,s,u,o,e,E,f,v]),C().createElement(C().Fragment,{key:"EventDateTimeComponent"},C().createElement(S,{postData:e.postData}),C().createElement(n.DatePicker,{ref:t=>e.focusFieldsRef.current.start_date=t,title:__("Start date","stachethemes_event_calendar_lite"),description:__("Event initial start date","stachethemes_event_calendar_lite"),includeTime:!u,value:A,onChange:e=>{const t=moment(e);u&&t.set({hours:0,minutes:0,seconds:0});const a=t.format("YYYY-MM-DD\\THH:mm");c(a)},required:!0,errorMessage:__("Event must have a start date","stachethemes_event_calendar_lite"),wasSubmitted:a}),C().createElement(h.default,null),C().createElement(n.DatePicker,{ref:t=>e.focusFieldsRef.current.end_date=t,title:__("End date","stachethemes_event_calendar_lite"),description:__("Event initial end date","stachethemes_event_calendar_lite"),includeTime:!u,value:k,onChange:e=>{const t=moment(e);u&&t.set({hours:23,minutes:59,seconds:59});const a=t.format("YYYY-MM-DD\\THH:mm");i(a)},required:!0,errorMessage:__("Event must have an end date","stachethemes_event_calendar_lite"),wasSubmitted:a}),C().createElement(h.default,null),C().createElement(r.InputCheckbox,{title:__("All day","stec "),description:__("Check if your event spans throughout the day","stachethemes_event_calendar_lite"),value:u,onChange:e=>{if(e){R.set({hours:0,minutes:0,seconds:0}),b.set({hours:23,minutes:59,seconds:59});const e=R.format("YYYY-MM-DD\\THH:mm"),t=b.format("YYYY-MM-DD\\THH:mm");c(e),i(t)}d(e)}}),C().createElement(h.default,null),C().createElement(r.InputCheckbox,{title:__("Hide end date","stec "),description:__("Check if you don't want to show the event end date on the front-end","stachethemes_event_calendar_lite"),value:o,onChange:e=>{_(e)}}),D&&C().createElement(C().Fragment,null,C().createElement(h.default,null),C().createElement(m.default,{title:__("Repeat event","stachethemes_event_calendar_lite"),description:__("Set repeat scheme for your events","stachethemes_event_calendar_lite"),exdate:v,rrule:E,manual:f,min:b.format("YYYY-MM-DD"),onModeChange:e=>{g("manual"===e)},onRRuleChange:e=>{y(e)},onExdateChange:e=>{p(e)}})))},N=({postData:e,focusFieldsRef:t,wasSubmitted:a,onCalendarChange:l})=>{const[n,r]=(0,T.useState)((0,b.uniqueId)());return C().createElement(C().Fragment,{key:n},C().createElement(I,{postData:e,focusFieldsRef:t,wasSubmitted:a,onCalendarChange:()=>{l&&(l(),r((0,b.uniqueId)()))}}),C().createElement(h.default,null),C().createElement(c.UncontrolledInputColor,{title:__("Event Color","stachethemes_event_calendar_lite"),defaultValue:e.current.meta.color,description:__("Select color for your event","stachethemes_event_calendar_lite"),onChange:t=>{e.current.meta.color=t}}),C().createElement(h.default,null),C().createElement(u.UncontrolledInputThumbType,{title:__("Thumbnail type","stachethemes_event_calendar_lite"),defaultValue:e.current.meta.thumbnail,description:__("Event thumbnail","stachethemes_event_calendar_lite"),onChange:t=>{e.current.meta.thumbnail=t}}))};const M=function(e){const t=e.postData,a=e.wasSubmitted,n=e.focusFieldsRef;return C().createElement(_.default,{title:__("General","stachethemes_event_calendar_lite")},t.current.link&&C().createElement(o.default,{className:"stec-dashboard-edit-event-permalink"},C().createElement(i.default,{readOnly:!0,title:__("Permalink","stachethemes_event_calendar_lite"),value:t.current.link,description:__("The event current permalink","stachethemes_event_calendar_lite"),onChange:()=>{}}),C().createElement(l.default,{extra:{title:__("View event","stachethemes_event_calendar_lite")},className:"blue",label:__("View","stachethemes_event_calendar_lite"),href:t.current.link,target:"_blank"})),C().createElement(i.UncontrolledInputText,{ref:e=>n.current.title=e,title:__("Title","stachethemes_event_calendar_lite"),description:__("The event title","stachethemes_event_calendar_lite"),placeholder:__("Title","stachethemes_event_calendar_lite"),defaultValue:t.current.title.raw,onChange:e=>{t.current.title.raw=e},regex:(0,y.getRegexByType)("title"),errorMessage:__("The event must have a title","stachethemes_event_calendar_lite"),wasSubmitted:a}),C().createElement(h.default,null),C().createElement(i.UncontrolledInputText,{ref:e=>n.current.slug=e,title:__("Slug","stachethemes_event_calendar_lite"),placeholder:__("Slug","stachethemes_event_calendar_lite"),description:__("The event title slug. Leave empty to auto-generate","stachethemes_event_calendar_lite"),defaultValue:t.current.slug,onChange:e=>{t.current.slug=e},regex:(0,y.getRegexByType)("slug"),errorMessage:__("The event must have a valid slug","stachethemes_event_calendar_lite"),wasSubmitted:a}),C().createElement(h.default,null),C().createElement(N,{postData:t,focusFieldsRef:n,wasSubmitted:a,onCalendarChange:e.onCalendarChange}),C().createElement(h.default,null),C().createElement(s.UncontrolledInputSelect,{ref:e=>n.current.timezone=e,title:__("Timezone","stachethemes_event_calendar_lite"),options:[{label:__("Use calendar timezone","stachethemes_event_calendar_lite"),value:"stec_cal_default"},...g.default.map((e=>({value:e.value,label:e.label})))],defaultValue:t.current.meta.timezone,required:!0,onChange:e=>{t.current.meta.timezone=e},description:__("Event timezone","stachethemes_event_calendar_lite"),errorMessage:__("The event must have a timezone","stachethemes_event_calendar_lite"),wasSubmitted:a}),C().createElement(h.default,null),C().createElement(x,{postData:t,wasSubmitted:a,focusFieldsRef:n,onChange:e=>{t.current.meta.start_date=e.startDate,t.current.meta.end_date=e.endDate,t.current.meta.all_day=e.allDay,t.current.meta.hide_end=e.hideEnd,t.current.meta.rrule=e.rrule,t.current.meta.manual_rrule=e.manualRrule,t.current.meta.exdate=e.exdate}}),C().createElement(h.default,null),C().createElement(k,{postData:t,focusFieldsRef:n,wasSubmitted:a}),C().createElement(h.default,null),C().createElement(s.UncontrolledInputSelect,{title:__("Event Status","stachethemes_event_calendar_lite"),defaultValue:t.current.meta.event_status,options:[{value:"EventScheduled",label:__("Scheduled","stachethemes_event_calendar_lite")},{value:"EventMovedOnline",label:__("Moved Online","stachethemes_event_calendar_lite")},{value:"EventPostponed",label:__("Postponed","stachethemes_event_calendar_lite")},{value:"EventRescheduled",label:__("Rescheduled","stachethemes_event_calendar_lite")},{value:"EventCancelled",label:__("Cancelled","stachethemes_event_calendar_lite")}],description:__("Set event status","stachethemes_event_calendar_lite"),onChange:e=>{t.current.meta.event_status=e}}),C().createElement(h.default,null),C().createElement(r.UncontrolledInputCheckbox,{title:__("Set as Featured","stachethemes_event_calendar_lite"),description:__("Mark event as featured","stachethemes_event_calendar_lite"),defaultValue:t.current.meta.featured,onChange:e=>{t.current.meta.featured=e}}),C().createElement(h.default,null),C().createElement(r.UncontrolledInputCheckbox,{title:__("Allow comments","stachethemes_event_calendar_lite"),defaultValue:"open"===t.current.comment_status,description:__("Allow comments for this event","stachethemes_event_calendar_lite"),onChange:e=>{t.current.comment_status=!0===e?"open":"closed"}}),C().createElement(w,{postData:t,focusFieldsRef:n,wasSubmitted:a}))}},1530:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var l=a(52779),n=a(32779),r=a(41426),c=a(48596),s=a(22819),i=a(98196),u=a(80745),d=a(13328),o=a(73772),m=a(26960),_=a(26878);const __=o.__,h=({postData:e})=>{const{items:t,ready:a,error:l}=(0,d.useTaxonomyItemsAll)({perPage:100,permissionType:"use_permission",taxonomy:"stec_gst"});return!0!==a||!0===l?null:React.createElement(n.UncontrolledInputSelect,{title:__("Select guests","stachethemes_event_calendar_lite"),multiple:!0,description:__("Select existing guests","stachethemes_event_calendar_lite"),defaultValue:e.current.stec_gst,options:t.map((e=>({value:e.id,label:e.name,color:e.meta.color}))),onChange:t=>{e.current.stec_gst=t}})},v=e=>{const[t,a]=(0,_.useState)(0),[n,d]=(0,_.useState)(!1),o=e.postData,v=()=>{(0,i.flushApiCache)({group:"taxonomy-stec_gst"}),a((0,m.uniqueId)())};return React.createElement(React.Fragment,null,React.createElement(r.default,{isOpen:n,onClose:()=>{d(!1)}},React.createElement(u.UpsertForm,{template:!1,onBack:()=>{d(!1)},onGuestInserted:e=>{!1===Array.isArray(o.current.stec_gst)&&(o.current.stec_gst=[]),!1===o.current.stec_gst.some((t=>e.id===t))&&(o.current.stec_gst=[...o.current.stec_gst,e.id]),v()},onGuestDeleted:e=>{!1===Array.isArray(o.current.stec_gst)&&(o.current.stec_gst=[]),o.current.stec_gst=o.current.stec_gst.filter((t=>t!==e.id)),v()}})),React.createElement(c.default,{title:__("Guests list","stachethemes_event_calendar_lite")},React.createElement(h,{key:t,postData:o}),React.createElement(s.default,null),React.createElement(l.default,{disabled:!STEC_VARIABLES.current_user.capability.manage_guests,label:[React.createElement("i",{key:"icon",className:"fa-solid fa-plus"}),__("Add new guest","stachethemes_event_calendar_lite")],className:"blue",onClick:()=>{if(!STEC_VARIABLES.current_user.capability.manage_guests)return!1;d(!0)}})))}},64059:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var l=a(59249),n=a(32488),r=a(39393),c=a(48596),s=a(22819),i=a(7517),u=a(73772);const __=u.__,d=e=>{const t=e.postData;return React.createElement(c.default,{title:__("Introduction","stachethemes_event_calendar_lite")},React.createElement(l.UncontrolledInputImages,{title:__("Add images to your event","stachethemes_event_calendar_lite"),buttonTitle:__("Add Images","stachethemes_event_calendar_lite"),multiple:!0,defaultValue:t.current.meta.images.sort((({order:e},{order:t})=>e-t)),onChange:e=>{t.current.meta.images=e.map(((e,t)=>(e.order=t,e)))}}),React.createElement(s.default,null),React.createElement(i.default,{title:__("Description","stachethemes_event_calendar_lite"),description:__("Detailed description about the event","stachethemes_event_calendar_lite"),value:t.current.content.raw,onChange:e=>{t.current.content.raw=e}}),React.createElement(s.default,null),React.createElement(r.UncontrolledInputTextarea,{title:__("Short description","stachethemes_event_calendar_lite"),description:__("Short description about the event","stachethemes_event_calendar_lite"),defaultValue:t.current.excerpt.raw,onChange:e=>{t.current.excerpt.raw=e}}),React.createElement(s.default,null),React.createElement(n.UncontrolledInputText,{title:__("External link","stachethemes_event_calendar_lite"),description:__("Any url relevant to your event that you may want to include","stachethemes_event_calendar_lite"),placeholder:__("URL","stachethemes_event_calendar_lite"),onChange:e=>{t.current.meta.external_link.url=e},defaultValue:t.current.meta.external_link.url}),React.createElement(s.default,null),React.createElement(n.UncontrolledInputText,{title:__("External link text","stachethemes_event_calendar_lite"),description:__("External link text. Leave empty to use the default link text","stachethemes_event_calendar_lite"),placeholder:__("The external link button text","stachethemes_event_calendar_lite"),onChange:e=>{t.current.meta.external_link.text=e},defaultValue:t.current.meta.external_link.text}))}},84260:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var l=a(52779),n=a(32779),r=a(41426),c=a(48596),s=a(22819),i=a(98196),u=a(54940),d=a(13328),o=a(73772),m=a(26960),_=a(26878);const __=o.__,h=({postData:e})=>{const{items:t,ready:a,error:l}=(0,d.useTaxonomyItemsAll)({perPage:100,permissionType:"use_permission",taxonomy:"stec_loc"});if(!0!==a||!0===l)return null;const r=t.map((e=>({value:e.id,label:e.name})));return r.unshift({value:"",label:__("None","stachethemes_event_calendar_lite")}),React.createElement(n.UncontrolledInputSelect,{title:__("Select location","stachethemes_event_calendar_lite"),description:__("Select existing locations","stachethemes_event_calendar_lite"),defaultValue:e.current.stec_loc,options:r,onChange:t=>{e.current.stec_loc=t}})},v=e=>{const[t,a]=(0,_.useState)(0),[n,d]=(0,_.useState)(!1),o=e.postData,v=()=>{(0,i.flushApiCache)({group:"taxonomy-stec_loc"}),a((0,m.uniqueId)())};return React.createElement(React.Fragment,null,React.createElement(r.default,{isOpen:n,onClose:()=>{d(!1)}},React.createElement(u.UpsertForm,{template:!1,onBack:()=>{d(!1)},onLocationInserted:e=>{o.current.stec_loc=e.id,v()},onLocationDeleted:e=>{o.current.stec_loc=[],v()}})),React.createElement(c.default,{title:__("Locations list","stachethemes_event_calendar_lite")},React.createElement(h,{key:t,postData:o}),React.createElement(s.default,null),React.createElement(l.default,{disabled:!STEC_VARIABLES.current_user.capability.manage_locations,label:[React.createElement("i",{key:"icon",className:"fa-solid fa-plus"}),__("Add new location","stachethemes_event_calendar_lite")],className:"blue",onClick:()=>{if(!STEC_VARIABLES.current_user.capability.manage_locations)return!1;d(!0)}})))}},80897:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var l=a(52779),n=a(32779),r=a(41426),c=a(48596),s=a(22819),i=a(98196),u=a(68168),d=a(13328),o=a(73772),m=a(26960),_=a(26878);const __=o.__,h=({postData:e})=>{const{items:t,ready:a,error:l}=(0,d.useTaxonomyItemsAll)({perPage:100,permissionType:"use_permission",taxonomy:"stec_org"});return!0!==a||!0===l?null:React.createElement(n.UncontrolledInputSelect,{title:__("Select organizers","stachethemes_event_calendar_lite"),multiple:!0,description:__("Select existing organizers","stachethemes_event_calendar_lite"),defaultValue:e.current.stec_org,options:t.map((e=>({value:e.id,label:e.name,color:e.meta.color}))),onChange:t=>{e.current.stec_org=t}})},v=e=>{const[t,a]=(0,_.useState)(0),[n,d]=(0,_.useState)(!1),o=e.postData,v=()=>{(0,i.flushApiCache)({group:"taxonomy-stec_org"}),a((0,m.uniqueId)())};return React.createElement(React.Fragment,null,React.createElement(r.default,{isOpen:n,onClose:()=>{d(!1)}},React.createElement(u.UpsertForm,{template:!1,onBack:()=>{d(!1)},onOrganizerInserted:e=>{!1===Array.isArray(o.current.stec_org)&&(o.current.stec_org=[]),!1===o.current.stec_org.some((t=>e.id===t))&&(o.current.stec_org=[...o.current.stec_org,e.id]),v()},onOrganizerDeleted:e=>{!1===Array.isArray(o.current.stec_org)&&(o.current.stec_org=[]),o.current.stec_org=o.current.stec_org.filter((t=>t!==e.id)),v()}})),React.createElement(c.default,{title:__("Organizers list","stachethemes_event_calendar_lite")},React.createElement(h,{key:t,postData:o}),React.createElement(s.default,null),React.createElement(l.default,{disabled:!STEC_VARIABLES.current_user.capability.manage_organizers,label:[React.createElement("i",{key:"icon",className:"fa-solid fa-plus"}),__("Add new organizer","stachethemes_event_calendar_lite")],className:"blue",onClick:()=>{if(!STEC_VARIABLES.current_user.capability.manage_organizers)return!1;d(!0)}})))}},90408:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var l=a(85262),n=a(39393),r=a(48596),c=a(22819),s=a(73772);const __=s.__,i=e=>{const t=e.postData;return t.current.meta.health_measures||(t.current.meta.health_measures={require_masks:!1,require_temp:!1,require_distance:!1,require_tracing:!1,require_rapid_test:!1,require_pcr_test:!1,require_certificate:!1,custom:""}),React.createElement(r.default,{title:__("Public health measures","stachethemes_event_calendar_lite")},React.createElement(l.UncontrolledInputCheckbox,{title:__("Require face masks","stachethemes_event_calendar_lite"),description:__("Require event attendees to wear face masks","stachethemes_event_calendar_lite"),defaultValue:t.current.meta.health_measures.require_masks,onChange:e=>{t.current.meta.health_measures.require_masks=e}}),React.createElement(c.default,null),React.createElement(l.UncontrolledInputCheckbox,{title:__("Require temperature screening","stachethemes_event_calendar_lite"),description:__("Require event attendees to undergo temperature screening upon entry","stachethemes_event_calendar_lite"),defaultValue:t.current.meta.health_measures.require_temp,onChange:e=>{t.current.meta.health_measures.require_temp=e}}),React.createElement(c.default,null),React.createElement(l.UncontrolledInputCheckbox,{title:__("Require safe distance","stachethemes_event_calendar_lite"),description:__("Require event attendees to maintain safe physical distance","stachethemes_event_calendar_lite"),defaultValue:t.current.meta.health_measures.require_distance,onChange:e=>{t.current.meta.health_measures.require_distance=e}}),React.createElement(c.default,null),React.createElement(l.UncontrolledInputCheckbox,{title:__("Require tracing","stachethemes_event_calendar_lite"),description:__("Require event attendees to provide their contact information for contact tracing purposes","stachethemes_event_calendar_lite"),defaultValue:t.current.meta.health_measures.require_tracing,onChange:e=>{t.current.meta.health_measures.require_tracing=e}}),React.createElement(c.default,null),React.createElement(l.UncontrolledInputCheckbox,{title:__("Require negative rapid antigen test","stachethemes_event_calendar_lite"),defaultValue:t.current.meta.health_measures.require_rapid_test,onChange:e=>{t.current.meta.health_measures.require_rapid_test=e},description:__("Require event attendees to have negative rapid antigen test","stachethemes_event_calendar_lite")}),React.createElement(c.default,null),React.createElement(l.UncontrolledInputCheckbox,{title:__("Require negative PCR test","stachethemes_event_calendar_lite"),defaultValue:t.current.meta.health_measures.require_pcr_test,onChange:e=>{t.current.meta.health_measures.require_pcr_test=e},description:__("Require event attendees to have negative PCR test","stachethemes_event_calendar_lite")}),React.createElement(c.default,null),React.createElement(l.UncontrolledInputCheckbox,{title:__("Require vaccination certificate","stachethemes_event_calendar_lite"),defaultValue:t.current.meta.health_measures.require_certificate,onChange:e=>{t.current.meta.health_measures.require_certificate=e},description:__("Require event attendees to have valid vaccination certificate","stachethemes_event_calendar_lite")}),React.createElement(c.default,null),React.createElement(n.UncontrolledInputTextarea,{title:__("Custom requirements","stachethemes_event_calendar_lite"),defaultValue:t.current.meta.health_measures.custom,onChange:e=>{t.current.meta.health_measures.custom=e},description:__("Add your own requirement here separated by | character","stachethemes_event_calendar_lite")}))}},50942:(e,t,a)=>{a.r(t),a.d(t,{default:()=>E});var l=a(52779),n=a(85873),r=a(62552),c=a(32488),s=a(39393),i=a(79051),u=a(48596),d=a(79226),o=a(22819),m=a(73772),_=a(26960),h=a(26878);const __=m.__,v=React.forwardRef(((e,t)=>{const{item:a}=e,l=(0,h.useRef)(!1),u=__("Timespan","stachethemes_event_calendar_lite"),m=a.title||u;return React.createElement(d.default,{ref:l,key:a.id,title:m,subtitle:__("Edit timespan...","stachethemes_event_calendar_lite"),onRemove:()=>{t.current.meta.schedule=t.current.meta.schedule.filter((e=>e.id!==a.id)),e.onRequestNewInstance()}},React.createElement(c.UncontrolledInputText,{title:__("Title","stachethemes_event_calendar_lite"),placeholder:__("Timespan Title","stachethemes_event_calendar_lite"),defaultValue:a.title,onChange:e=>{a.title=e,(e=>{l.current.querySelector(".stec-section-collapse-title").textContent=e||u})(e)}}),React.createElement(o.default,null),React.createElement(n.UncontrolledDatePicker,{title:__("Date and time","stachethemes_event_calendar_lite"),includeTime:!0,defaultValue:a.start,onChange:e=>{a.start=e}}),React.createElement(o.default,null),React.createElement(r.UncontrolledInputColor,{title:__("Color","stachethemes_event_calendar_lite"),defaultValue:a.color,onChange:e=>{a.color=e}}),React.createElement(o.default,null),React.createElement(i.UncontrolledInputThumbType,{defaultValue:a.thumbnail,onChange:e=>{a.thumbnail=e}}),React.createElement(o.default,null),React.createElement(s.UncontrolledInputTextarea,{title:__("Details","stachethemes_event_calendar_lite"),defaultValue:a.details,onChange:e=>{a.details=e}}))}));v.displayName="ScheduleItem";const p=React.forwardRef(((e,t)=>React.createElement(React.Fragment,null,t.current.meta.schedule.map(((a,l)=>React.createElement(v,{ref:t,key:a.id,item:a,onRequestNewInstance:e.onRequestNewInstance}))))));p.displayName="ScheduleContent";const E=e=>{const t=e.postData.current.meta.schedule.length,[a,n]=(0,h.useState)(0),r=()=>{n((0,_.uniqueId)())},c={id:t<=0?1:t+1,title:"",start:e.postData.current.meta.start_date,color:"#75dd66",thumbnail:{type:"icon",icon:"fa-solid fa-flag",image:[]},details:""};return React.createElement(u.default,{title:__("Schedule","stachethemes_event_calendar_lite")},React.createElement(p,{instanceKey:a,ref:e.postData,onRequestNewInstance:r}),React.createElement(l.default,{className:"blue",style:{marginTop:5},label:__("Add Timespan","stachethemes_event_calendar_lite"),onClick:()=>{const t=c;e.postData.current.meta.schedule.push(t),r()}}))}},26812:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var l=a(73772);const __=l.__,n={general:["general","title","slug","calendar","calendars","select","color","event","thumb","thumbail","thumbails","image","icon","timezone","start","end","date","repeat","rrule","all","day","category","categories","status","featured","comments","allow","read","edit","permission","permissions","hide","add","new"],introduction:["new","add","remove","intro","introduction","image","images","slider","media","description","text","about","short","external","link","read","more"],schedule:["new","add","remove","schedule","timetable","timetables","list","timespan","timespans","time","span"],location:["new","add","remove","location","virtual","venue","address","map","latitude","longitude","coordinates","country","city","zip","code","state","province","street","place"],organizers:["add","remove","organizer","organizers","host","hosts","author","authors"],guests:["add","remove","guest","guests","speakers","speaker","performers","performer","artists","artist","instructors","instructor","teachers","teacher","presenters","presenter"],attachments:["attachment","attachments","file","files","download","downloads"],"public-health":["public","health","covid","corona","virus","pandemic","social","distance","mask","masks","vaccination","vaccinations","vaccinated","vaccine","vaccines","require","required","requirement"],about:["about","author","authors","change","details","edit"]},r=e=>{const t=void 0===window.stecFilterAdminEventTabsKeywords?n:window.stecFilterAdminEventTabsKeywords(n);return void 0===t[e]?[]:t[e]},c=[{id:"general",icon:"fa-solid fa-cog",label:__("General","stachethemes_event_calendar_lite"),active:!0,keywords:r("general")},{id:"introduction",icon:"fa-solid fa-paragraph",label:__("Introduction","stachethemes_event_calendar_lite"),active:!1,keywords:r("introduction")},{id:"schedule",icon:"fa-solid fa-list",label:__("Schedule","stachethemes_event_calendar_lite"),active:!1,keywords:r("schedule")},{id:"location",icon:"fa-solid fa-map-marker-alt",label:__("Location","stachethemes_event_calendar_lite"),active:!1,keywords:r("location")},{id:"organizers",icon:"fa-solid fa-user-edit",label:__("Organizers","stachethemes_event_calendar_lite"),active:!1,keywords:r("organizers")},{id:"guests",icon:"fa-solid fa-star",label:__("Guests","stachethemes_event_calendar_lite"),active:!1,keywords:r("guests")},{id:"attachments",icon:"fa-solid fa-file-download",label:__("Attachments","stachethemes_event_calendar_lite"),active:!1,keywords:r("attachments")},{id:"public-health",icon:"fa-solid fa-shield-virus",label:__("Public health","stachethemes_event_calendar_lite"),active:!1,keywords:r("public-health")},{id:"about",icon:"fa-solid fa-address-card",label:__("About","stachethemes_event_calendar_lite"),active:!1,keywords:r("about")}]},59006:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});const l=moment().format("YYYY-MM-DD\\THH:mm"),n=void 0!==window.STEC_EVENT_TEMPLATE?window.STEC_EVENT_TEMPLATE:{title:{raw:""},slug:"",content:{raw:""},excerpt:{raw:""},status:"publish",comment_status:"closed",stec_cal:"",stec_cat:"",stec_gst:"",stec_loc:"",stec_org:"",meta:{color:"#464646",thumbnail:{type:"icon",icon:"fa-solid fa-calendar-day",image:[]},timezone:"stec_cal_default",schedule:[],images:[],attendance_method:"",attendance_persons_per_rsvp:-1,attendance_rsvp_schedule_start:-1,attendance_rsvp_schedule_end:-1,attendance_persons_limit:-1,attendance_private_list:!1,attachments:[],external_link:{url:"",text:""},event_status:"EventScheduled",featured:!1,start_date:l,end_date:l,all_day:!1,hide_end:!1,rrule:"",manual_rrule:!1,exdate:[],products:[],tickets:[],health_measures:{require_masks:!1,require_temp:!1,require_distance:!1,require_tracing:!1,require_rapid_test:!1,require_pcr_test:!1,require_certificate:!1,custom:""},author_notes:"",read_permission:["stec_public"],edit_permission:["stec_private"]}}},80745:(e,t,a)=>{a.r(t),a.d(t,{UpsertForm:()=>S,default:()=>w});var l=a(52779),n=a(93699),r=a(62552),c=a(59249),s=a(32779),i=a(42743),u=a(32488),d=a(39393),o=a(48596),m=a(22819),_=a(98196),h=a(91927),v=a(81148),p=a(6405),E=a(13328),y=a(8403),f=a(73772),g=a(26960),R=a(26878),b=a(60799),T=a(32228);const __=f.__,C=e=>{const{wasSubmitted:t,focusFieldsRef:a,postData:l}=e,{items:n,ready:r,error:c}=(0,E.usePermissions)();return!r||c?null:React.createElement(React.Fragment,null,React.createElement(E.WithMaybeDisplayPermissions,{type:"edit_permission"},React.createElement(m.default,null),React.createElement(s.UncontrolledInputSelect,{ref:e=>a.current.edit_permission=e,multiple:!0,title:__("Edit permission","stachethemes_event_calendar_lite"),options:n.filter((e=>"stec_public"!==e.value)),defaultValue:l.current.meta.edit_permission,description:__("Who can edit this guest","stachethemes_event_calendar_lite"),required:!0,errorMessage:__("The edit permission cannot be empty","stachethemes_event_calendar_lite"),wasSubmitted:t,onChange:e=>{l.current.meta.edit_permission=e}})),React.createElement(E.WithMaybeDisplayPermissions,{type:"use_permission"},React.createElement(m.default,null),React.createElement(s.UncontrolledInputSelect,{ref:e=>a.current.use_permission=e,multiple:!0,title:__("Use permission","stachethemes_event_calendar_lite"),options:n,defaultValue:l.current.meta.use_permission,description:__("Who can add this guest to their events","stachethemes_event_calendar_lite"),required:!0,errorMessage:__("The use permission cannot be empty","stachethemes_event_calendar_lite"),wasSubmitted:t,onChange:e=>{l.current.meta.use_permission=e}})))};function S(e){const[t,a]=(0,R.useState)(!1),[s,h]=(0,R.useState)(0),E=(0,R.useRef)(!1),y=T.default,f=(0,R.useRef)((0,g.cloneDeep)(e.template?e.template:y)),S=(0,R.useRef)([]),w=(e,t=!0)=>{f.current=t?(0,g.cloneDeep)(e):e,h((0,g.uniqueId)())},A=f.current.id?[React.createElement("i",{key:"icon",className:"fa-solid fa-pen-to-square"}),__("Edit guest","stachethemes_event_calendar_lite")]:[React.createElement("i",{key:"icon",className:"fa-solid fa-plus"}),__("Add new guest","stachethemes_event_calendar_lite")];return React.createElement(o.default,{title:A,key:s},React.createElement(v.default,{postData:f}),React.createElement(m.default,null),React.createElement(c.UncontrolledInputImages,{multiple:!1,defaultValue:f.current.meta.photo,title:__("Photo","stachethemes_event_calendar_lite"),buttonTitle:__("Add Photo","stachethemes_event_calendar_lite"),description:__("Add photo for this guest from the WordPress Media Library","stachethemes_event_calendar_lite"),onChange:e=>{f.current.meta.photo=e.map((e=>(e.dimensions&&delete e.dimensions,e)))}}),React.createElement(m.default,null),React.createElement(u.UncontrolledInputText,{ref:e=>S.current.name=e,title:__("Name"),defaultValue:f.current.name,placeholder:__("Guest name","stachethemes_event_calendar_lite"),description:__("Guest display name"),required:!0,regex:(0,p.getRegexByType)("title"),errorMessage:__("The guest must have a name","stachethemes_event_calendar_lite"),wasSubmitted:t,onChange:e=>{f.current.name=e}}),React.createElement(m.default,null),React.createElement(u.UncontrolledInputText,{ref:e=>S.current.slug=e,title:__("Slug"),defaultValue:f.current.slug,placeholder:__("Guest slug","stachethemes_event_calendar_lite"),description:__("Leave empty to auto-generate"),required:!1,regex:(0,p.getRegexByType)("slug"),errorMessage:__("The guest must have a valid slug","stachethemes_event_calendar_lite"),onChange:e=>{f.current.slug=e},wasSubmitted:t}),React.createElement(m.default,null),React.createElement(r.UncontrolledInputColor,{title:__("Color","stachethemes_event_calendar_lite"),defaultValue:f.current.meta.color,description:__("Guest color","stachethemes_event_calendar_lite"),onChange:e=>{f.current.meta.color=e}}),React.createElement(m.default,null),React.createElement(d.UncontrolledInputTextarea,{title:__("Description","stachethemes_event_calendar_lite"),description:__("About this Guest","stachethemes_event_calendar_lite"),defaultValue:f.current.description,onChange:e=>{f.current.description=e}}),React.createElement(m.default,null),React.createElement(i.UncontrolledInputSocialLinks,{title:__("Social Links","stachethemes_event_calendar_lite"),description:__("Social links like Facebook, Twitter, Instagram...","stachethemes_event_calendar_lite"),defaultLinks:f.current.meta.social,onChange:e=>{f.current.meta.social=e}}),React.createElement(m.default,null),React.createElement(u.UncontrolledInputText,{ref:e=>S.current.email=e,type:"email",title:__("Email","stachethemes_event_calendar_lite"),placeholder:__("Email","stachethemes_event_calendar_lite"),description:__("Contact email","stachethemes_event_calendar_lite"),defaultValue:f.current.meta.email,regex:(0,p.getRegexByType)("email"),errorMessage:__("Invalid email","stachethemes_event_calendar_lite"),wasSubmitted:t,onChange:e=>{f.current.meta.email=e}}),React.createElement(m.default,null),React.createElement(C,{postData:f,focusFieldsRef:S,wasSubmitted:t}),React.createElement(m.default,null),React.createElement(l.default,{label:f.current.id?__("Update","stachethemes_event_calendar_lite"):__("Create","stachethemes_event_calendar_lite",0),className:"green",onClick:()=>{if(!0!==E.current){if(a(!0),!1===(()=>{const e=[{id:"name",regex:(0,p.getRegexByType)("title"),meta:!1,errorMessage:__("The guest must have a name","stachethemes_event_calendar_lite")},{id:"slug",regex:(0,p.getRegexByType)("slug"),meta:!1,errorMessage:__("The guest must have a valid slug","stachethemes_event_calendar_lite")},{id:"email",regex:(0,p.getRegexByType)("email"),meta:!0,errorMessage:__("Invalid email","stachethemes_event_calendar_lite")},{id:"use_permission",meta:!0,errorMessage:__("The use permission cannot be empty","stachethemes_event_calendar_lite")},{id:"edit_permission",meta:!0,errorMessage:__("The edit permission cannot be empty","stachethemes_event_calendar_lite")}];for(let t in e){const a=e[t],l=a.meta?f.current.meta[a.id]:f.current[a.id];let n=!0;if(n=a.regex?new RegExp(a.regex).test(l):Array.isArray(l)?l.length>0:!(!l||""===l),!1===n)return S.current[a.id]&&S.current[a.id].focus(),b.toast.error(a.errorMessage),!1}return!0})())return!1;b.toast.promise(new Promise(((t,a)=>{E.current=!0,async function(){try{let l;l=f.current.id?await(0,_.newApiPut)({route:"GUESTS",args:f.current.id,data:f.current,includeResponseStatus:!0,errorMessage:"auto"}):await(0,_.newApiPost)({route:"GUESTS",data:f.current,includeResponseStatus:!0,translateErrorCode:{term_exists:__("A guest with this name already exists","stachethemes_event_calendar_lite")},errorMessage:"auto"});const{status:n,data:r}=l;switch(n){case 201:return e.onGuestInserted&&e.onGuestInserted(r),w(r),(0,_.flushApiCache)({group:"taxonomy-stec_gst"}),t(__("Created","stachethemes_event_calendar_lite"));case 200:return e.onGuestInserted&&e.onGuestInserted(r),w(r),(0,_.flushApiCache)({group:"taxonomy-stec_gst"}),t(__("Updated","stachethemes_event_calendar_lite"));default:return a(__("Sorry, something went wrong","stachethemes_event_calendar_lite"))}}catch(e){return a(e.message)}}()})),{loading:__("Saving","stachethemes_event_calendar_lite"),success:e=>(E.current=!1,e),error:e=>(E.current=!1,e)})}else(0,b.toast)(__("Another action is in progress","stachethemes_event_calendar_lite"))}}),React.createElement(l.default,{label:__("Reset form","stachethemes_event_calendar_lite"),className:"yellow",style:{marginLeft:5},onClick:()=>{w(y),a(!1),(0,b.toast)(__("The form has been reset","stachethemes_event_calendar_lite"))}}),f.current.id&&React.createElement(n.default,{label:__("Delete","stachethemes_event_calendar_lite"),className:"red",style:{marginLeft:5},onClick:()=>{!0!==E.current?b.toast.promise(new Promise(((t,a)=>{E.current=!0,async function(){try{await(0,_.newApiDelete)({route:"GUESTS",args:f.current.id});e.onGuestDeleted&&e.onGuestDeleted(f.current);const a=(0,g.cloneDeep)(f.current);return a.id="",w(a,!1),(0,_.flushApiCache)({group:"taxonomy-stec_gst"}),t(__("Deleted","stachethemes_event_calendar_lite"))}catch(e){return a(e.message)}}()})),{loading:__("Deleting","stachethemes_event_calendar_lite"),success:e=>(E.current=!1,e),error:e=>(E.current=!1,e)}):(0,b.toast)(__("Another action is in progress","stachethemes_event_calendar_lite"))}}),React.createElement(l.default,{label:__("Back","stachethemes_event_calendar_lite"),className:"blue",style:{marginLeft:5},onClick:()=>{const t=!f.current.id;e.onBack(t)}}))}const w=function(){const{setActiveMenu:e,activeMenuParams:t}=(0,h.useDashboardMenu)(),a=a=>{let l=t.manageListQueryArgs||null;a&&(l=null),e({page:"guests-list",params:{initialQueryArgs:l}})};return React.createElement(React.Fragment,null,React.createElement(y.StecDiv,{className:"stec-dashboard-top-nav"},React.createElement(l.default,{className:"stcolor stec-dashboard-home-button",label:[React.createElement("i",{key:"icon",className:"fa-solid fa-home"}),__("Home","stachethemes_event_calendar_lite")],onClick:()=>{e({page:"home",params:{}})}}),React.createElement(l.default,{className:"blue",label:[React.createElement("i",{key:"icon",className:"fa-solid fa-list"}),__("Manage guests","stachethemes_event_calendar_lite")],onClick:a})),React.createElement(S,{template:t.template||!1,onBack:e=>{a(e)}}))}},32228:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});const l=void 0!==window.STEC_GUEST_TEMPLATE?window.STEC_GUEST_TEMPLATE:{name:"",slug:"",status:"publish",description:"",meta:{author:"",color:"#B4CFB0",photo:[],email:"",social:[],read_permission:["stec_public"],use_permission:["stec_private"],edit_permission:["stec_private"]}}}}]);