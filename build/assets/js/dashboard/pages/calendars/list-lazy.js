"use strict";(globalThis.webpackChunkstec=globalThis.webpackChunkstec||[]).push([[4555],{92138:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var n=a(58168),s=a(98196),c=a(73772),r=a(26878),l=a(60799),i=a(33694);const __=c.__,_n=c._n,_x=c._x;const o=function(){const[e,t]=(0,r.useState)(0),a={listPageId:"calendars-list",upsertPageId:"calendars-upsert",restUrl:"CALENDARS",termLabelSingle:__("calendar","stachethemes_event_calendar_lite"),termLabelPlural:__("calendars","stachethemes_event_calendar_lite"),taxonomyName:"stec_cal",itemsMap:(e,a,n,r)=>{let i=[...a];if(e.count>0){const a={id:"empty-calendar",label:[React.createElement("i",{key:"icon",className:"fa-solid fa-broom"}),_x("Empty","Empty the calendar","stachethemes_event_calendar_lite")],color:"yellow",onClick:()=>{((e,a)=>{!0!==a.current?l.toast.promise(new Promise(((n,c)=>{a.current=!0,async function(){try{return await(0,s.newApiDelete)({route:"DELETE-FROM-CALENDAR",args:e.id,errorMessage:"auto"}),t((new Date).getTime()),n(__("Events deleted","stachethemes_event_calendar_lite"))}catch(e){return c(e.message)}}()})),{loading:__("Deleting","stachethemes_event_calendar_lite"),success:e=>(a.current=!1,e),error:e=>(a.current=!1,e)}):(0,l.toast)(__("Another action is in progress","stachethemes_event_calendar_lite"))})(e,r)}};i=[a,...i]}return{key:e.id,id:e.id,title:`${e.name} (ID#${e.id})`,description:(0,c.sprintf)(_n("Used by %d event","Used by %d events",e.count,"stachethemes_event_calendar_lite"),e.count),thumbnail:{type:e.meta.thumbnail.type,icon:e.meta.thumbnail.icon,image:e.meta.thumbnail?.image[0]?.sizes?.thumbnail,backgroundColor:e.meta.color,color:"#fff",day:"DD",month:"MMM"},controls:i,checked:n.some((t=>e.id===t))}}};return React.createElement(i.default,(0,n.default)({key:e},a))}},33694:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var n=a(58168),s=a(52779),c=a(48596),r=a(91927),l=a(8403),i=a(26878),o=a(57994),m=a(73772);const __=m.__;const d=function(e){const t=(0,i.useRef)([]),{setActiveMenu:a}=(0,r.useDashboardMenu)();return React.createElement(React.Fragment,null,React.createElement(l.StecDiv,{className:"stec-dashboard-top-nav"},React.createElement(s.default,{className:"stcolor stec-dashboard-home-button",label:[React.createElement("i",{key:"icon",className:"fa-solid fa-home"}),__("Home","stachethemes_event_calendar_lite")],onClick:()=>{a({page:"home",params:{}})}}),React.createElement(s.default,{className:"green",label:[React.createElement("i",{key:"icon",className:"fa-solid fa-plus"}),(0,m.sprintf)(__("Add new %s","stachethemes_event_calendar_lite"),e.termLabelSingle)],onClick:()=>{a({page:e.upsertPageId,params:{}})}})),React.createElement(c.default,{className:"stec-manage-terms-wrapper",title:[React.createElement("i",{key:"icon",className:"fa-solid fa-list"}),(0,m.sprintf)(__("Manage %s","stachethemes_event_calendar_lite"),e.termLabelPlural)]},React.createElement(o.default,(0,n.default)({hasItemsRef:t},e))))}},57994:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var n=a(58168),s=a(32488),c=a(24292),r=a(98196),l=a(91927),i=a(13328),o=a(8403),m=a(73772),d=a(26960),u=a(26878),h=a(60799);const __=m.__,_=e=>{const t=(0,u.useRef)(!1),{activeMenuParams:a,setActiveMenu:n}=(0,l.useDashboardMenu)(),m=a.initialQueryArgs||{page:1,perPage:10,permissionType:"edit_permission",taxonomy:e.taxonomyName,search:""},[_,g]=(0,u.useState)(m),{items:p,totalPages:f,ready:v,error:y}=(0,i.useTaxonomyItems)(_),[b,D]=(0,u.useState)([]),R=t=>{const a=p.filter((e=>e.id===t))[0];n({page:e.upsertPageId,params:{template:a,manageListQueryArgs:{..._}}})},k=[{id:"select-all",label:__("Select all","stachethemes_event_calendar_lite"),onClick:()=>{b.length===p.length?D([]):D(p.map((e=>e.id)))},type:"checkbox",checked:b.length>0&&b.length===p.length},{id:"delete",color:"red",label:[React.createElement("i",{key:"icon",className:"fa-solid fa-trash"}),__("Delete","stachethemes_event_calendar_lite")],onClick:()=>{(()=>{if(!0!==t.current)return b.length<=0?h.toast.error(__("No items selected","stachethemes_event_calendar_lite")):void h.toast.promise(new Promise(((a,n)=>{t.current=!0,async function(){try{for await(let t of b)await(0,r.newApiDelete)({route:e.restUrl,args:`${t}?force=true`});return(0,r.flushApiCache)({group:`taxonomy-${e.taxonomy}`}),D([]),g((e=>({...e,page:1,seed:Date.now()}))),a(__("Items deleted","stachethemes_event_calendar_lite"))}catch(e){return n(e.message)}}()})),{loading:__("Deleting items","stachethemes_event_calendar_lite"),success:e=>(t.current=!1,e),error:e=>(t.current=!1,e)});(0,h.toast)(__("Another action is in progress","stachethemes_event_calendar_lite"))})()}}],E=[{id:"select-item",onClick:e=>{b.some((t=>e===t))?D(b.filter((t=>t!==e))):D([...b,e])}},{id:"title",onClick:e=>{R(e)}},{id:"duplicate",color:"blue",icon:React.createElement("i",{key:"icon",className:"fa-solid fa-clone"}),label:__("Duplicate","stachethemes_event_calendar_lite"),onClick:a=>{(a=>{if(!0===t.current)return void(0,h.toast)(__("Another action is in progress","stachethemes_event_calendar_lite"));const n=p.find((e=>e.id===a));if(!n)return void h.toast.error(__("Term not found","stachethemes_event_calendar_lite"));const s=(0,d.cloneDeep)(n),c=Date.now();delete s.id,delete s.slug,delete s.link,/\(duplicate-\d+\)/.test(s.name)&&(s.name=s.name.replace(/\(duplicate-\d+\)/g,"")),s.name=`${s.name} (duplicate-${c})`,h.toast.promise(new Promise(((a,n)=>{t.current=!0,async function(){try{const t=await(0,r.newApiPost)({route:e.restUrl,data:s,includeResponseStatus:!0}),{status:c,data:l}=t;return 201===c?(g((e=>({...e,seed:Date.now()}))),a(__("Duplicated","stachethemes_event_calendar_lite"))):n(__("Sorry, something went wrong","stachethemes_event_calendar_lite"))}catch(e){return n(e.message)}}()})),{loading:__("Duplicating","stachethemes_event_calendar_lite"),success:e=>(t.current=!1,e),error:e=>(t.current=!1,e)})})(a)}},{id:"edit",color:"blue",icon:React.createElement("i",{key:"icon",className:"fa-solid fa-edit"}),label:__("Edit","stachethemes_event_calendar_lite"),onClick:e=>{R(e)}},{id:"delete",color:"red",icon:React.createElement("i",{key:"icon",className:"fa-solid fa-trash"}),label:__("Delete","stachethemes_event_calendar_lite"),onClick:a=>{(a=>{!0!==t.current?h.toast.promise(new Promise(((n,s)=>{t.current=!0,async function(){try{return await(0,r.newApiDelete)({route:e.restUrl,args:a}),(0,r.flushApiCache)({group:`taxonomy-${e.taxonomy}`}),D([]),g((e=>({...e,page:1,seed:Date.now()}))),n(__("Deleted","stachethemes_event_calendar_lite"))}catch(e){return s(e.message)}}()})),{loading:__("Deleting","stachethemes_event_calendar_lite"),success:e=>(t.current=!1,e),error:e=>(t.current=!1,e)}):(0,h.toast)(__("Another action is in progress","stachethemes_event_calendar_lite"))})(a)}}],w=p.map((a=>e.itemsMap(a,E,b,t)));return e.hasItemsRef.current=p.length>0,React.createElement(React.Fragment,null,React.createElement(o.StecDiv,{className:"stec-manage-list-filterss stec-manage-list-filterss-taxonomies"},React.createElement(o.StecDiv,{className:"stec-manage-list-filterss-buttons"}),React.createElement(s.UncontrolledDelayedInputText,{placeholder:__("Search","stachethemes_event_calendar_lite"),defaultValue:_.search||"",onChange:e=>{g({..._,search:e,page:1})}})),React.createElement(c.default,{controls:k,totalPages:f,currentPage:_.page,onPageChange:e=>{(e=>{D([]),g({..._,page:e})})(e)},items:w,ready:v}))};const g=function(e){const[t,a]=(0,u.useState)(0);return React.createElement(_,(0,n.default)({key:t},e,{resetInstance:()=>{a(Date.now())}}))}}}]);