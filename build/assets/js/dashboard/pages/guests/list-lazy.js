"use strict";(globalThis.webpackChunkstec=globalThis.webpackChunkstec||[]).push([[6503],{7966:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var s=a(73772),n=a(33694);const __=s.__,_n=s._n;const c=function(){const e={listPageId:"guests-list",upsertPageId:"guests-upsert",restUrl:"GUESTS",termLabelSingle:__("guest","stachethemes_event_calendar_lite"),termLabelPlural:__("guests","stachethemes_event_calendar_lite"),taxonomyName:"stec_gst",itemsMap:(e,t,a)=>{const n=e.meta.photo[0]?.sizes.thumbnail;return{key:e.id,id:e.id,title:`${e.name} (ID#${e.id})`,description:(0,s.sprintf)(_n("Used by %d event","Used by %d events",e.count,"stachethemes_event_calendar_lite"),e.count),thumbnail:{type:n?"image":"icon",icon:"fa-solid fa-user",image:n||"",backgroundColor:e.meta.color,color:"#fff"},controls:t,checked:a.some((t=>e.id===t))}}};return React.createElement(n.default,e)}},33694:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var s=a(58168),n=a(52779),c=a(48596),l=a(91927),r=a(8403),i=a(26878),o=a(57994),m=a(73772);const __=m.__;const d=function(e){const t=(0,i.useRef)([]),{setActiveMenu:a}=(0,l.useDashboardMenu)();return React.createElement(React.Fragment,null,React.createElement(r.StecDiv,{className:"stec-dashboard-top-nav"},React.createElement(n.default,{className:"stcolor stec-dashboard-home-button",label:[React.createElement("i",{key:"icon",className:"fa-solid fa-home"}),__("Home","stachethemes_event_calendar_lite")],onClick:()=>{a({page:"home",params:{}})}}),React.createElement(n.default,{className:"green",label:[React.createElement("i",{key:"icon",className:"fa-solid fa-plus"}),(0,m.sprintf)(__("Add new %s","stachethemes_event_calendar_lite"),e.termLabelSingle)],onClick:()=>{a({page:e.upsertPageId,params:{}})}})),React.createElement(c.default,{className:"stec-manage-terms-wrapper",title:[React.createElement("i",{key:"icon",className:"fa-solid fa-list"}),(0,m.sprintf)(__("Manage %s","stachethemes_event_calendar_lite"),e.termLabelPlural)]},React.createElement(o.default,(0,s.default)({hasItemsRef:t},e))))}},57994:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var s=a(58168),n=a(32488),c=a(24292),l=a(98196),r=a(91927),i=a(13328),o=a(8403),m=a(73772),d=a(26960),u=a(26878),h=a(60799);const __=m.__,_=e=>{const t=(0,u.useRef)(!1),{activeMenuParams:a,setActiveMenu:s}=(0,r.useDashboardMenu)(),m=a.initialQueryArgs||{page:1,perPage:10,permissionType:"edit_permission",taxonomy:e.taxonomyName,search:""},[_,g]=(0,u.useState)(m),{items:p,totalPages:f,ready:v,error:y}=(0,i.useTaxonomyItems)(_),[b,k]=(0,u.useState)([]),R=t=>{const a=p.filter((e=>e.id===t))[0];s({page:e.upsertPageId,params:{template:a,manageListQueryArgs:{..._}}})},D=[{id:"select-all",label:__("Select all","stachethemes_event_calendar_lite"),onClick:()=>{b.length===p.length?k([]):k(p.map((e=>e.id)))},type:"checkbox",checked:b.length>0&&b.length===p.length},{id:"delete",color:"red",label:[React.createElement("i",{key:"icon",className:"fa-solid fa-trash"}),__("Delete","stachethemes_event_calendar_lite")],onClick:()=>{(()=>{if(!0!==t.current)return b.length<=0?h.toast.error(__("No items selected","stachethemes_event_calendar_lite")):void h.toast.promise(new Promise(((a,s)=>{t.current=!0,async function(){try{for await(let t of b)await(0,l.newApiDelete)({route:e.restUrl,args:`${t}?force=true`});return(0,l.flushApiCache)({group:`taxonomy-${e.taxonomy}`}),k([]),g((e=>({...e,page:1,seed:Date.now()}))),a(__("Items deleted","stachethemes_event_calendar_lite"))}catch(e){return s(e.message)}}()})),{loading:__("Deleting items","stachethemes_event_calendar_lite"),success:e=>(t.current=!1,e),error:e=>(t.current=!1,e)});(0,h.toast)(__("Another action is in progress","stachethemes_event_calendar_lite"))})()}}],E=[{id:"select-item",onClick:e=>{b.some((t=>e===t))?k(b.filter((t=>t!==e))):k([...b,e])}},{id:"title",onClick:e=>{R(e)}},{id:"duplicate",color:"blue",icon:React.createElement("i",{key:"icon",className:"fa-solid fa-clone"}),label:__("Duplicate","stachethemes_event_calendar_lite"),onClick:a=>{(a=>{if(!0===t.current)return void(0,h.toast)(__("Another action is in progress","stachethemes_event_calendar_lite"));const s=p.find((e=>e.id===a));if(!s)return void h.toast.error(__("Term not found","stachethemes_event_calendar_lite"));const n=(0,d.cloneDeep)(s),c=Date.now();delete n.id,delete n.slug,delete n.link,/\(duplicate-\d+\)/.test(n.name)&&(n.name=n.name.replace(/\(duplicate-\d+\)/g,"")),n.name=`${n.name} (duplicate-${c})`,h.toast.promise(new Promise(((a,s)=>{t.current=!0,async function(){try{const t=await(0,l.newApiPost)({route:e.restUrl,data:n,includeResponseStatus:!0}),{status:c,data:r}=t;return 201===c?(g((e=>({...e,seed:Date.now()}))),a(__("Duplicated","stachethemes_event_calendar_lite"))):s(__("Sorry, something went wrong","stachethemes_event_calendar_lite"))}catch(e){return s(e.message)}}()})),{loading:__("Duplicating","stachethemes_event_calendar_lite"),success:e=>(t.current=!1,e),error:e=>(t.current=!1,e)})})(a)}},{id:"edit",color:"blue",icon:React.createElement("i",{key:"icon",className:"fa-solid fa-edit"}),label:__("Edit","stachethemes_event_calendar_lite"),onClick:e=>{R(e)}},{id:"delete",color:"red",icon:React.createElement("i",{key:"icon",className:"fa-solid fa-trash"}),label:__("Delete","stachethemes_event_calendar_lite"),onClick:a=>{(a=>{!0!==t.current?h.toast.promise(new Promise(((s,n)=>{t.current=!0,async function(){try{return await(0,l.newApiDelete)({route:e.restUrl,args:a}),(0,l.flushApiCache)({group:`taxonomy-${e.taxonomy}`}),k([]),g((e=>({...e,page:1,seed:Date.now()}))),s(__("Deleted","stachethemes_event_calendar_lite"))}catch(e){return n(e.message)}}()})),{loading:__("Deleting","stachethemes_event_calendar_lite"),success:e=>(t.current=!1,e),error:e=>(t.current=!1,e)}):(0,h.toast)(__("Another action is in progress","stachethemes_event_calendar_lite"))})(a)}}],w=p.map((a=>e.itemsMap(a,E,b,t)));return e.hasItemsRef.current=p.length>0,React.createElement(React.Fragment,null,React.createElement(o.StecDiv,{className:"stec-manage-list-filterss stec-manage-list-filterss-taxonomies"},React.createElement(o.StecDiv,{className:"stec-manage-list-filterss-buttons"}),React.createElement(n.UncontrolledDelayedInputText,{placeholder:__("Search","stachethemes_event_calendar_lite"),defaultValue:_.search||"",onChange:e=>{g({..._,search:e,page:1})}})),React.createElement(c.default,{controls:D,totalPages:f,currentPage:_.page,onPageChange:e=>{(e=>{k([]),g({..._,page:e})})(e)},items:w,ready:v}))};const g=function(e){const[t,a]=(0,u.useState)(0);return React.createElement(_,(0,s.default)({key:t},e,{resetInstance:()=>{a(Date.now())}}))}}}]);