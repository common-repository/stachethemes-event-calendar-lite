"use strict";(globalThis.webpackChunkstec=globalThis.webpackChunkstec||[]).push([[5522],{36041:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var n=a(21067),c=a(84274),l=a(11668),s=a(63671),r=a(8403),i=a(26878),o=a.n(i),u=a(60799),m=a(47444),d=a(38976);const f=e=>"pending"===(0,n.useCalendarScreenTypeValue)()?null:e.children,p=({settingsAtts:e})=>{const t=(0,i.useRef)(),a=(0,n.useCalendarScreenType)(t);for(let t in e){let a=e[t];"boolean"!=typeof a&&(""!==a&&(isNaN(a)||(a=parseInt(a,10),e[t]=a)))}return o().createElement(r.StecDiv,{className:`stec ${a}`,ref:t},o().createElement(u.Toaster,s.default),o().createElement(d.default,{settingsAtts:e},o().createElement(f,null,o().createElement(l.default,null),o().createElement(c.default,null),"  ")))};const h=function({settingsAtts:e}){return o().createElement(m.RecoilRoot,null,o().createElement(p,{settingsAtts:e}))}},99597:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var n=a(21067),c=a(26878);const l=({settingsAtts:e,children:t})=>{const[a,l]=(0,c.useState)(!1),{setValue:s}=(0,n.useSettingsAtts)(),{setValue:r}=(0,n.useCurrentLayout)(),{setValue:i}=(0,n.useCalendarMoment)();return(0,c.useEffect)((()=>{if(!1===a){const t={};for(let a in e){const n=e[a];"atom_default"!==n&&(t[a]=n)}if(s(t),t.calendar__layout&&r(t.calendar__layout),t.filter__start_date){const e=moment(t.filter__start_date,"YYYY-MM-DD",!0);e.isValid()&&i(e)}l(!0)}}),[a,r,i,s,e]),!1===a?null:t}},14379:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var n=a(22008),c=a(21953),l=a(21067),s=a(73772),r=a(26878),i=a(47444);const __=s.__,o=({children:e})=>{const t=(0,l.useSettingsAtt)("prefetched_events_hash"),a=window.stecPrefetchedEvents[t],[{items:n,ready:s},o]=(0,i.useRecoilState)(c.calendarEvents),u=(0,l.useSettingsAtt)("id"),{ready:m}=(0,l.usePrepareTopFilters)({events:n,eventsReady:s});return(0,r.useEffect)((()=>{!1===s&&o({ready:!0,error:!1,items:Array.isArray(a)?a:[]})}),[n,a,s,o]),(0,r.useEffect)((()=>{m&&s&&"function"==typeof window.stecOnCalendarReady&&window.stecOnCalendarReady({id:u})}),[u,n,m,s]),e},u=({children:e})=>{const t=(0,l.useSettingsAtt)("id"),a=(0,l.useSettingsAtt)("filter__organizer"),c=(0,l.useSettingsAtt)("filter__location"),s=(0,l.useSettingsAtt)("filter__calendar"),i=(0,l.useSettingsAtt)("filter__category"),o=(0,l.useSettingsAtt)("filter__guest"),u=(0,l.useSettingsAtt)("filter__featured"),m=(0,l.useSettingsAtt)("filter__events"),d=(0,l.useSettingsAtt)("filter__min_date"),f=(0,l.useSettingsAtt)("filter__max_date"),p=(0,l.useSettingsAtt)("filter__minmax_intersect"),h=(0,l.useSettingsAtt)("filter__read_permission"),E=(0,l.useSettingsAtt)("filter__author"),{items:R,ready:v}=(0,l.useFetchCalendarEvents)({organizer:a,location:c,guest:o,calendar:s,category:i,minDate:d,maxDate:f,minMaxIntersect:p,featured:u,readPermission:h,author:E,include:m}),{ready:_}=(0,l.usePrepareTopFilters)({events:R,eventsReady:v});return(0,r.useEffect)((()=>{_&&v&&"function"==typeof window.stecOnCalendarReady&&window.stecOnCalendarReady({id:t})}),[v,_,t]),!1===_||!1===v?React.createElement(n.default,{className:"stec-calendar-preloader",type:"calendar-sprite",title:__("Loading calendar","stachethemes_event_calendar_lite")}):e},m=({children:e})=>{const t=(0,l.useSettingsAtt)("misc__events_prefetch"),a=(0,l.useSettingsAtt)("prefetched_events_hash");return t&&a?React.createElement(o,null,e):React.createElement(u,null,e)}},38976:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var n=a(99597),c=a(14379);const l=function({settingsAtts:e,children:t}){return React.createElement(n.default,{settingsAtts:e},React.createElement(c.default,null,t))}},84274:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var n=a(21067),c=a(3587),l=a(8403),s=a(26878);const r=(0,s.lazy)((()=>a.e(4225).then(a.bind(a,49437)))),i=(0,s.lazy)((()=>Promise.all([a.e(9952),a.e(6797)]).then(a.bind(a,85294)))),o=(0,s.lazy)((()=>Promise.all([a.e(9952),a.e(4625)]).then(a.bind(a,90998)))),u=(0,s.lazy)((()=>a.e(677).then(a.bind(a,47291)))),m=(0,s.lazy)((()=>a.e(8269).then(a.bind(a,98609)))),d=(0,s.lazy)((()=>a.e(2916).then(a.bind(a,35043)))),f=()=>{const{value:e}=(0,n.useCurrentLayout)();let t="";try{switch(e){case"agenda":t=React.createElement(r,null);break;case"month":t=React.createElement(i,null);break;case"week":t=React.createElement(o,null);break;case"day":t=React.createElement(u,null);break;case"grid":t=React.createElement(m,null);break;case"boxgrid":t=React.createElement(d,null);break;default:return null}}catch(e){t=null}return React.createElement(l.StecDiv,{className:"stec-layout"},React.createElement(s.Suspense,{fallback:React.createElement(c.default,null)},t))}},3587:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var n=a(8403),c=a(43516);const l=function(){return React.createElement(n.StecDiv,{className:"stec-skeleton",style:{position:"relative",width:"100%"}},React.createElement(c.default,{speed:1,width:"100%",height:94,backgroundColor:"var(--stec-ec-bg)",foregroundColor:"#ff5f5f",animate:!0},React.createElement("rect",{x:"0",y:"10",rx:"3",ry:"3",width:"100%",height:"2"})))}},97683:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var n=a(41426),c=a(21953),l=a(21067),s=a(22225),r=a(91927),i=a(8403),o=a(73772),u=a(26878),m=a(47444);const __=o.__,d=()=>{const[e,t]=(0,m.useRecoilState)(c.dashboardChangesNotice);return!1===e?null:React.createElement(i.StecDiv,{className:"stec-dashboard-changes-notice"},React.createElement("i",{className:"notice-icon fas fa-exclamation-triangle"}),__("Please note that certain changes may require you to reload the page in order to see them take effect on the front-end","stachethemes_event_calendar_lite"),React.createElement(i.StecSpan,{className:"close-button",onClick:()=>{t(!1)}},React.createElement("i",{className:"fa-solid fa-times"})))},f=()=>{const e=(0,l.useSettingsAtt)("dashboard__in_calendar"),[t,a]=(0,u.useState)(!1),{setActiveMenu:c}=(0,r.useDashboardMenu)(),o=()=>{c({page:"home",params:{}})},m=["stec-calendar-dashboard-button"];return t&&m.push("active"),!0!==STEC_VARIABLES?.current_user?.capability?.access_dashboard?null:e?React.createElement(React.Fragment,null,React.createElement(i.StecDiv,{className:m.join(" "),onClick:()=>{!1===!t?(a(!1),o()):a(!0)}},[React.createElement("i",{key:"icon",className:"fa-solid fa-cog"}),React.createElement(i.StecSpan,{key:"text"},__("Calendar Dashboard","stachethemes_event_calendar_lite"))]),React.createElement(u.Suspense,{fallback:""},React.createElement(n.default,{maxWidth:"1280px",isOpen:t,onClose:()=>{a(!1),o()}},React.createElement(React.Fragment,null,React.createElement(d,null),React.createElement(s.default,null))))):null}},22904:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var n=a(21067),c=a(8403),l=a(6405),s=a(26960);const r=({filterId:e,item:t})=>{const a=["stec-top-filter-item-inline"],{value:r,setValue:i}=(0,n.useTopFilters)(),o=(0,n.useSettingsAtt)("calendar__top_inline_categories_mode"),u=t.active;0===t.id&&a.push("stec-top-filter-item-inline-id-0"),u&&a.push("active");return React.createElement(c.StecSpan,{className:a.join(" "),onClick:a=>{"multi"===o?(a=>{a.stopPropagation();const n=(0,s.cloneDeep)(r);for(let a in n.items)if(n.items[a].id===e)for(let e in n.items[a].items)n.items[a].items[e].id===t.id&&(n.items[a].items[e].active=!t.active);i(n)})(a):(a=>{a.stopPropagation();const n=(0,s.cloneDeep)(r);for(let a in n.items){if(n.items[a].id!==e)continue;const c=n.items[a].items,l=c.find((e=>e.id===t.id)),s=c.every((e=>e.active)),r=c.some((e=>e.active&&e.id!==t.id)),i=!s&&!r&&l.active;c.forEach((e=>{e.active=i||e.id===t.id}))}i(n)})(a)}},React.createElement(c.StecSpan,{className:"stec-top-filter-item-inline-bgcolor",style:{backgroundColor:t.color||"var(--stec-color-gray)"}}),u&&React.createElement("i",{className:"fa-solid fa-check-square"}),!u&&React.createElement("i",{className:"fa-regular fa-square"}),React.createElement(c.StecSpan,null,(0,l.htmlEntities)(t.label)))},i=({filter:e})=>{const t=e.id,a=e.items;return a.length<=0||1===a.length&&0===a[0].id?null:React.createElement(c.StecDiv,{className:`stec-top-filter-inline stec-top-filter-inline-${t}`},a.map((e=>React.createElement(r,{key:e.id,filterId:t,item:e}))))};const o=function(){const{value:{items:e}}=(0,n.useTopFilters)(),t=(0,n.useSettingsAtt)("calendar__top_inline_categories"),a={categories:!1};return a.categories=t,e.filter((e=>!0===a[e.id])).map((e=>React.createElement(i,{key:e.id,filter:e})))}},11668:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var n=a(21067),c=a(8403),l=a(97683),s=a(22904),r=a(83066),i=a(80980),o=a(41317),u=a(84018),m=a(42746);const d=()=>{const e=(0,n.useSettingsAtt)("calendar__top_nav_buttons"),t=(0,n.useSettingsAtt)("calendar__top_datepicker_menu"),a=["stec-top-menu-datepicker-mobile"];return"mobile"!==(0,n.useCalendarScreenTypeValue)()?null:e||t?(t||a.push("stec-top-menu-datepicker-mobile-no-datepicker"),React.createElement(c.StecDiv,{className:a.join(" ")},React.createElement(m.default,{forceFullLabels:!0}))):null},f=()=>{const e=(0,n.useSettingsAtt)("calendar__top_enabled"),t=(0,n.useSettingsAtt)("calendar__top_filters_menu"),a=(0,n.useSettingsAtt)("calendar__top_layouts_menu"),m=(0,n.useCalendarScreenTypeValue)();return e?React.createElement(c.StecDiv,{className:"stec-top"},React.createElement(c.StecDiv,{className:"stec-top-flex"},React.createElement(u.default,null),a&&React.createElement(React.Fragment,null,""===m&&React.createElement(o.default,null),""!==m&&React.createElement(i.default,null))),React.createElement(d,null),2===t&&React.createElement(React.Fragment,null,React.createElement(r.default,{staticMode:!0})),React.createElement(s.default,null),React.createElement(l.default,null)):null}},50844:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var n=a(8403);const c=({label:e,active:t,onClick:a,extraClass:c})=>{const l=["stec-top-menu-button"];return!0===t&&l.push("active"),c&&l.push(c),React.createElement(n.StecDiv,{className:l.join(" "),onClick:a},e)}},42746:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(21067),c=a(6405),l=a(26878),s=a(50844),r=a(56634);const i=({forceFullLabels:e=!1})=>{const{value:t}=(0,n.useCurrentLayout)(),{setValue:a}=(0,n.useAgendaSliderKey)(),{safeValue:i,setValue:o}=(0,n.useCalendarMoment)(),u=(0,n.useCalendarScreenTypeValue)(),m=(0,n.useSettingsAtt)("misc__min_allowed_year"),d=(0,n.useSettingsAtt)("misc__max_allowed_year"),f=(0,n.useSettingsAtt)("calendar__top_nav_buttons"),p=(0,n.useSettingsAtt)("calendar__top_datepicker_menu"),h=(0,n.useShouldReverseOrder)(),E=(0,l.useMemo)((()=>{const e=[];for(let t=m;t<=d;t++)e.push({value:t,label:t});return e}),[d,m]),R=(0,l.useMemo)((()=>{const t=e||"mobile"!==u?"":"short";return(0,c.getMonthLabels)(t).map(((e,t)=>({value:t,label:e})))}),[e,u]),v=i.daysInMonth(),_=(0,l.useMemo)((()=>{const e=[];for(let t=1;t<=v;t++)e.push({value:t,label:t});return e}),[v]),S=(e,t)=>{const n=i.format("YMD");o(i.set(t,e)),a(n)},g=e=>{let n;switch(t){case"day":n="day";break;case"week":n="week";break;default:n="month"}"next"===e?o(h?i.endOf(n).add(1,n):i.startOf(n).add(1,n)):"prev"===e&&o(h?i.endOf(n).subtract(1,n):i.startOf(n).subtract(1,n));const c=i.format("YMD");a(c)},y=()=>{if(!f)return null;const e=React.createElement("i",{className:"fa-solid fa-chevron-left"});return React.createElement(s.default,{label:e,onClick:()=>{g("prev")}})},b=()=>{if(!f)return null;const e=React.createElement("i",{className:"fa-solid fa-chevron-right"});return React.createElement(s.default,{label:e,onClick:()=>{g("next")}})};switch(t){case"map":case"boxgrid":case"grid":case"month":return React.createElement(React.Fragment,null,React.createElement(y,null),p&&React.createElement(React.Fragment,null,React.createElement(r.default,{key:"monthDatePicker",type:"month",selected:i.month(),optionsArray:R,onClick:S}),React.createElement(r.default,{key:"yearDatePicker",type:"year",selected:i.year(),optionsArray:E,onClick:S})),React.createElement(b,null));default:return React.createElement(React.Fragment,null,React.createElement(y,null),p&&React.createElement(React.Fragment,null,React.createElement(r.default,{key:"dayDatePicker",type:"date",selected:i.date(),optionsArray:_,onClick:S}),React.createElement(r.default,{key:"monthDatePicker",type:"month",selected:i.month(),optionsArray:R,onClick:S}),React.createElement(r.default,{key:"yearDatePicker",type:"year",selected:i.year(),optionsArray:E,onClick:S})),React.createElement(b,null))}}},65066:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var n=a(8403),c=a(56224);const l=({filter:e,active:t,onClick:a})=>{const l=["stec-top-filter"],s=t===e.id;return s&&l.push("active"),l.push(`stec-top-filter-${e.id}`),React.createElement(n.StecDiv,{className:l.join(" "),onClick:()=>{a(e.id)}},React.createElement(n.StecSpan,{className:"stec-top-filter-selector"},React.createElement(n.StecSpan,{className:"stec-top-filter-title"},React.createElement("i",{className:e.icon}),React.createElement(n.StecSpan,null,e.label)),React.createElement(n.StecSpan,{className:"stec-top-filter-selector-toggle-icons"},s?React.createElement("i",{className:"fa-solid fa-chevron-down"}):React.createElement("i",{className:"fa-solid fa-chevron-right"}))),s&&React.createElement(c.default,{filter:e}))}},11957:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var n=a(8403),c=a(21067),l=a(6405),s=a(26960);const r=({filterId:e,item:t})=>{const{value:a,setValue:r}=(0,c.useTopFilters)(),i=["stec-top-filter-item"];return 0===t.id&&i.push("stec-top-filter-item-id-0"),React.createElement(n.StecDiv,{className:i.join(" "),onClick:n=>{n.stopPropagation();const c=(0,s.cloneDeep)(a);for(let a in c.items)if(c.items[a].id===e)for(let e in c.items[a].items)c.items[a].items[e].id===t.id&&(c.items[a].items[e].active=!t.active);r(c)}},React.createElement("i",{className:t.active?"fa-solid fa-check-square":"fa-regular fa-square"}),React.createElement(n.StecSpan,null,(0,l.htmlEntities)(t.label)))}},14565:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var n=a(8403),c=a(83870);const l=({placeholder:e,onChange:t})=>React.createElement(n.StecDiv,{className:"stec-top-filter-item-search",onClick:e=>{e.stopPropagation()}},React.createElement(c.default,{placeholder:e,onChange:t,delay:100}))},39154:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var n=a(8403),c=a(21067),l=a(26960),s=a(73772);const __=s.__,r=({filterId:e,items:t})=>{const{value:a,setValue:s}=(0,c.useTopFilters)();return React.createElement(n.StecDiv,{className:"stec-top-filter-item",onClick:n=>{n.stopPropagation(),(()=>{let n=!0;for(let e in t)if(!1===t[e].active){n=!1;break}const c=t.map((e=>e.id)),r=(0,l.cloneDeep)(a);for(let t in r.items)if(r.items[t].id===e)for(let e in r.items[t].items){const a=r.items[t].items[e];c.includes(a.id)&&(a.active=!n)}s(r)})()}},React.createElement("i",{className:"fa-solid fa-check-double"}),React.createElement(n.StecSpan,null,__("Select All","stachethemes_event_calendar_lite")))}},56224:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var n=a(8403),c=a(11957),l=a(14565),s=a(39154),r=a(26878),i=a(73772);const __=i.__,o=({filter:e})=>{const[t,a]=(0,r.useState)(""),o=e.items.filter((e=>""===t||e.label.toLowerCase().includes(t.toLowerCase())));return React.createElement(n.StecDiv,{className:"stec-top-filter-items-container"},(o.length>5||t)&&React.createElement(l.default,{placeholder:(0,i.sprintf)(__("Search %s","stachethemes_event_calendar_lite"),e.label.toLowerCase()),onChange:e=>{a(e)}}),React.createElement(n.StecDiv,{class:"stec-top-filter-items"},o.length>1&&React.createElement(s.default,{filterId:e.id,items:o}),o.map((t=>React.createElement(c.default,{key:t.id,filterId:e.id,item:t})))))}},81433:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var n=a(13328),c=a(8403),l=a(26878),s=a(50844),r=a(83066),i=a(21067),o=a(73772);const __=o.__,u=()=>{const e=(0,l.useRef)(!1),[t,a]=(0,l.useState)(!1),{value:{items:o}}=(0,i.useTopFilters)();return(0,n.useOutsideHandler)(e,(()=>{a(!1)})),o.length<=0?null:React.createElement(c.StecDiv,{className:"stec-top-menu-filters",ref:e},React.createElement(s.default,{label:[React.createElement("i",{key:"icon",className:"stec-top-menu-filter-icon fa-solid fa-filter"}),React.createElement("span",{key:"text",className:"stec-top-menu-filter-label"},__("Filter","stachethemes_event_calendar_lite"))],active:t,onClick:e=>{a(!t)}}),t&&React.createElement(r.default,null))}},83066:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8403),c=a(65066),l=a(21067),s=a(13328),r=a(26878);const i=({staticMode:e=!1})=>{const t=(0,r.useRef)(null),{value:{items:a}}=(0,l.useTopFilters)(),[i,o]=(0,r.useState)(""),u=a.filter((e=>{const{items:t}=e;return Array.isArray(t)&&t.length>0&&!(1===t.length&&0===t[0].id)})),m=u.length,d=["stec-top-filters-menu"];return e&&d.push("static"),m<=2&&d.push("prevent-mobile"),(0,s.useOutsideHandler)(t,e?()=>{o("")}:null),React.createElement(n.StecDiv,{className:d.join(" "),ref:t},u.map((e=>React.createElement(c.default,{key:e.id,filter:e,active:i,onClick:e=>{o(i===e?"":e)}}))))}},80980:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});var n=a(8403),c=a(50844),l=a(21067);const s=()=>{const{value:e,setValue:t}=(0,l.useCurrentLayout)(),a=(0,l.useAvailableLayouts)();return a.length<=1?null:React.createElement(n.StecDiv,{className:"stec-top-layout-dropdown-menu"},React.createElement(c.default,{label:React.createElement("i",{className:"fa-solid fa-bars"})}),React.createElement(n.StecDiv,{className:"stec-top-layout-dropdown-menu-list"},a.map((a=>{const c=["stec-top-layout-dropdown-menu-list-item"];return a.id===e&&c.push("active"),React.createElement(n.StecDiv,{key:a.id,className:c.join(" "),onClick:()=>{t(a.id)}},a.label)}))))}},41317:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});var n=a(21067),c=a(8403),l=a(50844);a(73772);const s=()=>{const{value:e,setValue:t}=(0,n.useCurrentLayout)(),a=(0,n.useAvailableLayouts)();return a.length<=1?null:React.createElement(c.StecDiv,{className:"stec-top-layout-menu"},a.map((a=>{const n=a.id===e;return React.createElement(l.default,{key:a.id,label:a.label,active:n,onClick:()=>{t(a.id)}})})))}},84018:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var n=a(21067),c=a(8403),l=a(73772),s=a(26960),r=a(50844),i=a(42746),o=a(81433),u=a(56940);const __=l.__,m=()=>{const{setValue:e}=(0,n.useCalendarMoment)(),{setValue:t}=(0,n.useAgendaSliderKey)();return React.createElement(r.default,{label:[React.createElement("i",{key:"icon",className:"stec-top-menu-today-icon fa-solid fa-calendar-check"}),React.createElement("span",{key:"text",className:"stec-top-menu-today-label"},__("Today","stachethemes_event_calendar_lite"))],onClick:()=>{e(moment()),t((0,s.uniqueId)())}})};const d=function(){const e=(0,n.useSettingsAtt)("calendar__top_today_button"),t=(0,n.useSettingsAtt)("calendar__top_search_menu"),a=(0,n.useSettingsAtt)("calendar__top_filters_menu"),l=(0,n.useCalendarScreenTypeValue)();return React.createElement(c.StecDiv,{className:"stec-top-main-menu"},React.createElement(c.StecDiv,{className:"stec-top-main-menu-section"},e&&React.createElement(m,null),t&&React.createElement(u.default,null),1===a&&React.createElement(o.default,null)),"mobile"!==l&&React.createElement(c.StecDiv,{className:"stec-top-main-menu-section"},React.createElement(i.default,null)))}},56634:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(6405),c=a(8403),l=a(26878),s=a(50844);const r=(e,t)=>{var a=t.current.scrollTop,n=t.current.clientHeight;"down"===e&&(n*=-1),t.current.scrollTo({top:a-n,behavior:"smooth"})},i=({type:e,selected:t,optionsArray:a,onClick:i})=>{const o=(0,l.useRef)(0),u=(0,l.useRef)(0);let m=["stec-top-scroll-menu"];"month"===e&&m.push("stec-top-scroll-menu-month");const d=a.filter((e=>e.value===t));return React.createElement(c.StecDiv,{className:m.join(" "),onMouseEnter:()=>{(0,n.centerScrollElement)(u,o)}},React.createElement(s.default,{label:d[0].label}),React.createElement(c.StecDiv,{className:"stec-top-scroll-menu-dropdown"},React.createElement(c.StecDiv,{className:"stec-top-scroll-menu-control stec-top-scroll-menu-control-up",onClick:()=>r("up",u)},React.createElement("i",{className:"fa-solid fa-caret-up"})),React.createElement(c.StecDiv,{className:"stec-top-scroll-menu-dropdown-list",ref:u},Object.keys(a).map((n=>{const l=["stec-top-scroll-menu-dropdown-option"],s=a[n],r=s.value,u=s.label;let m;return t===r&&(l.push("active"),m=o),React.createElement(c.StecDiv,{key:r,ref:m,className:l.join(" "),onClick:()=>i(r,e)},u)}))),React.createElement(c.StecDiv,{className:"stec-top-scroll-menu-control stec-top-scroll-menu-control-down",onClick:()=>r("down",u)},React.createElement("i",{className:"fa-solid fa-caret-down"}))))}},56940:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var n=a(81604),c=a(13328),l=a(8403),s=a(26878),r=a(50844),i=a(36143),o=a(73772);const __=o.__,u=()=>{const[e,t]=(0,s.useState)(!1),a=(0,s.useRef)(),[o,u]=(0,s.useState)(!1);(0,c.useOutsideHandler)(a,(()=>{!1===e&&u(!1)}));return React.createElement(React.Fragment,null,e&&React.createElement(n.default,{key:e.id,forceOpenIn:"modal",event:e,active:!0,noPreviewWhenModal:!0,onActiveToggle:()=>{t(!1)}}),React.createElement(l.StecDiv,{className:"stec-top-menu-search",ref:a},React.createElement(r.default,{label:[React.createElement("i",{key:"icon",className:"stec-top-menu-search-icon fa-solid fa-search"}),React.createElement("span",{key:"text",className:"stec-top-menu-search-label"},__("Search","stachethemes_event_calendar_lite"))],active:o,onClick:e=>{u(!o)}}),o&&React.createElement(i.default,{onEventSelect:e=>{t(e)}})))}},83870:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var n=a(8403),c=a(26878);a(73772);const l=({placeholder:e,onChange:t,delay:a=500})=>{let l="";return(0,c.useEffect)((()=>()=>{clearTimeout(l)})),React.createElement(n.StecDiv,{className:"stec-top-search-menu-wrapper"},React.createElement(n.StecDiv,{className:"stec-top-search-menu-input-wrapper"},React.createElement(n.StecSpan,null,React.createElement("i",{className:"fa-solid fa-search"})),React.createElement("input",{className:"stec-top-menu-search-input",type:"text",name:"",placeholder:e,onKeyUp:e=>{var n;n=e.target.value,clearTimeout(l),l=setTimeout((()=>{t(n)}),a)}})))}},36143:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(8403),c=a(83870),l=a(80260),s=a(26878),r=a(73772);const __=r.__,i=({onEventSelect:e})=>{const[t,a]=(0,s.useState)("");return React.createElement(n.StecDiv,{className:["stec-top-search-menu"].join(" ")},React.createElement(c.default,{placeholder:__("Search event","stachethemes_event_calendar_lite"),onChange:e=>{a(e)}}),React.createElement(l.default,{searchText:t,onEventSelect:e}))}},72721:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var n=a(6405),c=a(21067),l=a(8403);const s=e=>{const t=(0,c.useSettingsAtt)("calendar__links_target");switch((0,c.useSettingsAtt)("calendar__open_events_in")){case"external":{let a="";return e.event.meta?.external_link?.url?a=e.event.meta.external_link.url:(0,n.getEventPermalink)(e.event),React.createElement("a",{className:"stec-top-search-menu-result",href:a,target:t},e.children)}case"single":{const a=(0,n.getEventPermalink)(e.event);return React.createElement("a",{className:"stec-top-search-menu-result",href:a,target:t},e.children)}default:return React.createElement(l.StecDiv,{className:"stec-top-search-menu-result",onClick:()=>{e.onEventSelect(e.event)}},e.children)}},r=({event:e,onEventSelect:t})=>{const a=(0,c.useSettingsAtt)("calendar__date_format"),r=(0,c.useSettingsAtt)("calendar__time_format"),i=(0,c.useSettingsAtt)("calendar__show_tz_offset"),o=(0,c.useSettingsAtt)("calendar__thumbnail_source"),u=(0,n.getEventThumbnailByType)(e,"",o),m=(0,c.useSettingsAtt)("calendar__use_user_timezone");return React.createElement(s,{event:e,onEventSelect:t},React.createElement(l.StecDiv,{className:"stec-top-search-menu-result-thumb"},u),React.createElement(l.StecDiv,{className:"stec-top-search-menu-result-content"},React.createElement(l.StecSpan,{className:"stec-top-search-menu-result-content-title"},e.title),React.createElement(l.StecSpan,{className:"stec-top-search-menu-result-content-nfo"},React.createElement("i",{className:"fa-solid fa-clock"}),(0,n.beautifyEventTimespan)({event:e,dateFormat:a,timeFormat:r,showUtcOffset:i,fullMonth:!0,forceHideEnd:!0,showInUserTimezone:m})),e.location?.id&&React.createElement(l.StecSpan,{className:"stec-top-search-menu-result-content-nfo"},"virtual"===e.location.type?React.createElement("i",{className:"fa-solid fa-wifi"}):React.createElement("i",{className:"fa-solid fa-map-marker-alt"}),e.location.title)))}},80260:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var n=a(21067),c=a(8403),l=a(72721),s=a(73772);const __=s.__,r=({searchText:e,onEventSelect:t})=>{const{safeValue:a}=(0,n.useCalendarMoment)();let r=moment(a).startOf("day").format("YYYY-MM-DDTHH:mm"),i=moment(a).startOf("day").add(12,"months").format("YYYY-MM-DDTHH:mm");if("function"==typeof window.stecFilterTopMenuSearchRanges){const e=window.stecFilterTopMenuSearchRanges({startRange:r,endRange:i,current:moment(a).format("YYYY-MM-DDTHH:mm")});"object"==typeof e&&("string"==typeof e.startRange&&(r=e.startRange),"string"==typeof e.endRange&&(i=e.endRange))}const{value:o}=(0,n.useCalendarEvents)(),u=`top-menu-search-${(0,n.useSettingsAtt)("id")}`,{items:m,ready:d}=(0,n.useSearchEventsByText)({searchText:e,events:o,startRange:r,endRange:i,threadIndex:u});return e?!0===d&&m.length<=0?React.createElement(c.StecSpan,{className:"stec-top-menu-search-result-message"},React.createElement("i",{className:"fa-solid fa-search"}),__("No events found","stachethemes_event_calendar_lite")):!0!==d?React.createElement(c.StecSpan,{className:"stec-top-menu-search-result-message"},React.createElement("i",{className:"fa-solid fa-search"}),(0,s.sprintf)(__("Searching for %s","stachethemes_event_calendar_lite"),e)):React.createElement(c.StecDiv,{className:"stec-top-search-menu-results"},m.map((e=>React.createElement(l.default,{key:`${e.id}-${e.meta.start_date}`,event:e,onEventSelect:e=>{t(e)}})))):null}},22008:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var n=a(8403);const c=({title:e,type:t,color:a,style:c,className:l})=>{const s=["stec-loader"];return"small"===t?s.push("stec-loader-small"):"small-wide"===t&&s.push("stec-loader-small-wide"),l&&s.push(l),React.createElement(n.StecDiv,{className:s.join(" "),style:c},"calendar-sprite"!==t&&React.createElement("i",{className:"fa-solid fa-cog",style:{color:a}}),"calendar-sprite"===t&&React.createElement(n.StecSpan,{className:"stec-loader-calendar-sprite"}),e&&React.createElement(n.StecSpan,{style:{color:a}},e))}},22225:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var n=a(26878),c=a.n(n),l=a(47444);const s=c().lazy((()=>Promise.all([a.e(3328),a.e(4896)]).then(a.bind(a,43303))));const r=function({withRecoil:e=!1}){return c().createElement(n.Suspense,{fallback:""},!0===e&&c().createElement(l.RecoilRoot,null,c().createElement(s,null)),!1===e&&c().createElement(s,null))}},54949:(e,t,a)=>{a.r(t),a.d(t,{dashboardMenu:()=>n});const n=(0,a(47444).atom)({key:"dashboardMenu",default:{page:"",params:{}}})},91927:(e,t,a)=>{a.r(t),a.d(t,{useDashboardCounters:()=>r,useDashboardMenu:()=>i,useSearchEvents:()=>o,useSettings:()=>u,useUserData:()=>m});var n=a(98196),c=a(26878),l=a(47444),s=a(54949);const r=()=>{const{data:e,error:t,isLoading:a,ready:c}=(0,n.useApiGet)({route:"DASHBOARD/COUNTERS",args:"",cacheKey:null});return{data:e,error:t,isLoading:a,ready:c}},i=()=>{const[e,t]=(0,l.useRecoilState)(s.dashboardMenu);let a=e.page,n=e.params;if(""===e.page){const e=new URL(window.location.href).hash.replace("#","");e&&(a=e,n={})}return{activeMenuPage:a,activeMenuParams:n,setActiveMenu:({page:e="",params:a={},pushState:n=!0})=>{if(document.getElementById("stec-admin-dashboard")&&n){const t=new URL(window.location.href);t.hash=e,window.history.pushState({page:e,params:JSON.stringify(a)},t,t)}t({page:e,params:a})}}},o=({input:e="",args:t=""})=>{const[a,l]=(0,c.useState)({items:[],error:!1,status:"idle"});let s=(0,c.useRef)(null);return(0,c.useEffect)((()=>{const a=new AbortController,c=a.signal;return e.length>2?s.current=setTimeout((()=>{(async()=>{try{l({items:[],error:!1,status:"loading"});const c=await(0,n.newApiGet)({route:"EVENTS",args:`?search=${e}&${t}`,abortController:a});l({items:c,error:!1,status:"ready"})}catch(e){!1===c.aborted&&l({items:[],error:!0,status:"ready"})}})()}),500):l({items:[],error:!1,status:"idle"}),()=>{a.abort(),clearTimeout(s.current)}}),[e,t]),a},u=()=>{const{data:e,ready:t,error:a}=(0,n.useApiGet)({route:"SETTINGS",args:""});return{settings:e,ready:t,error:a}},m=e=>{const{data:t,ready:a,error:c}=(0,n.useApiGet)({route:"STEC-USERS",args:`?s=${e.s||""}`,errorMessage:"auto",cacheKey:`STEC-USERS-s-${e.s}`});return{data:t,ready:a,error:c}}}}]);